
var pathobject = {
" ": [0,0], // hack around issue with 1st item not showing
// Afghanistan - Pakistan
"AFG": [[874,336],[873,336],[873,336],[873,336],[873,336],[873,336],[873,336],[873,337],[873,337],[873,337],[873,337],[873,337],[873,337],[873,338],[873,338],[873,338],[873,338],[873,338],[873,338],[873,339],[873,339],[873,339],[873,339],[873,339],[873,339],[873,340],[873,340],[873,340],[873,340],[873,340],[873,340],[873,340],[873,341],[873,341],[873,341],[873,341],[873,341],[873,341],[873,342],[873,342],[873,342],[873,342],[873,342],[873,342],[874,343],[874,343],[874,343],[874,343],[874,343],[874,343],[874,344],[874,344],[874,344],[874,344],[874,344],[874,344],[874,344],[875,345],[875,345],[875,345],[875,345],[875,345],[875,345],[876,346],[876,346],[876,346],[876,346],[876,346],[876,346],[876,347],[876,347],[876,347],[876,347],[876,347],[876,347],[877,348],[877,348],[877,348],[877,348],[877,348],[877,348],[877,348],[879,349],[879,349],[879,349],[879,349],[879,349],[879,349],[880,350],[880,350],[880,350],[880,350],[880,350],[881,351],[882,351],[883,351],[884,351],[885,351],[886,351],[887,352]],
// Armenia ARM, Azerbaijan AZE -> Armenia, Azerbaijan
"ARM": [[800,312],[800,312],[800,312],[800,312],[800,312],[800,312],[800,312],[800,312],[801,313],[801,313],[801,313],[801,313],[801,313],[801,313],[801,313],[801,313],[802,314],[802,314],[802,314],[802,314],[802,314],[802,314],[802,314],[802,314],[803,314],[803,314],[803,314],[803,314],[803,314],[803,314],[803,314],[804,314],[804,314],[804,314],[804,314],[804,314],[804,314],[804,314],[804,314],[805,314],[805,314],[805,314],[805,314],[805,314],[805,314],[805,314],[805,314],[806,315],[806,315],[806,315],[806,315],[806,315],[806,315],[806,315],[807,314],[807,314],[807,314],[807,314],[807,314],[807,314],[807,314],[807,314],[808,314],[808,314],[808,314],[808,314],[808,314],[808,314],[808,314],[808,314],[809,314],[809,314],[809,314],[809,314],[809,314],[809,314],[809,314],[810,314],[810,314],[810,314],[810,314],[810,314],[810,314],[810,314],[810,314],[811,313],[811,313],[811,313],[811,313],[811,313],[811,313],[811,313],[811,313],[812,312],[812,312],[812,312],[812,312],[812,312],[812,312],[812,312]],
"AZE": [[813,313],[812,312],[812,311],[812,311],[812,311],[812,311],[812,311],[811,310],[811,310],[811,310],[811,310],[811,310],[811,310],[811,310],[811,310],[810,309],[810,309],[810,309],[810,309],[810,309],[810,309],[810,309],[810,309],[809,309],[809,309],[809,309],[809,309],[809,309],[809,309],[809,309],[808,309],[808,309],[808,309],[808,309],[808,309],[808,309],[808,309],[808,309],[807,309],[807,309],[807,309],[807,309],[807,309],[807,309],[807,309],[807,309],[806,309],[806,309],[806,309],[806,309],[806,309],[806,309],[806,309],[805,309],[805,309],[805,309],[805,309],[805,309],[805,309],[805,309],[805,309],[804,309],[804,309],[804,309],[804,309],[804,309],[804,309],[804,309],[804,309],[803,309],[803,309],[803,309],[803,309],[803,309],[803,309],[803,309],[802,309],[802,309],[802,309],[802,309],[802,309],[802,309],[802,309],[802,309],[801,310],[801,310],[801,310],[801,310],[801,310],[801,310],[801,310],[801,310],[800,311],[800,311],[800,311],[800,311],[800,311],[800,311],[800,311],[800,311]],
// Bosnia
"BIH": [[706,296],[706,296],[706,296],[705,295],[705,295],[705,295],[704,295],[704,295],[704,295],[703,295],[703,295],[703,295],[702,295],[702,295],[702,295],[701,295],[701,295],[701,295],[700,295],[700,295],[700,295],[699,295],[699,295],[699,295],[698,295],[698,295],[698,295],[697,294],[697,294],[697,294],[696,294],[696,294],[696,294],[695,294],[695,294],[695,294],[694,293],[694,293],[694,293],[693,293],[693,293],[693,293],[692,292],[692,292],[692,292],[691,292],[691,292],[691,292],[690,291],[690,291],[690,291],[689,291],[689,291],[689,291],[688,290],[688,290],[688,290],[687,289],[687,289],[687,289],[686,289],[686,289],[686,289],[685,288],[685,288],[685,288],[684,287],[684,287],[684,287],[683,286],[683,286],[683,286],[682,285],[682,285],[682,285],[681,284],[681,284],[681,284],[680,283],[680,283],[680,283],[679,281],[679,281],[679,281],[678,280],[678,280],[678,280],[677,278],[677,278],[677,278],[676,276],[676,276],[676,276],[675,274],[675,274],[675,274],[674,271],[674,271],[674,271],[674,271]],
// China -> HK
"CHN": [[1009,331],[1009,331],[1009,332],[1009,332],[1009,333],[1009,333],[1009,334],[1009,334],[1009,335],[1009,335],[1009,336],[1009,336],[1009,337],[1009,337],[1009,338],[1009,338],[1009,339],[1009,339],[1009,340],[1009,340],[1009,341],[1009,341],[1009,342],[1009,342],[1009,343],[1009,343],[1009,344],[1009,344],[1009,345],[1009,345],[1009,346],[1009,346],[1010,347],[1010,347],[1010,348],[1010,348],[1010,349],[1010,349],[1010,350],[1010,350],[1011,351],[1011,351],[1011,352],[1011,352],[1011,353],[1011,353],[1012,354],[1012,354],[1012,355],[1012,355],[1013,356],[1013,357],[1013,357],[1014,358],[1014,358],[1014,359],[1014,359],[1015,360],[1015,360],[1015,361],[1015,361],[1016,362],[1016,362],[1017,363],[1017,363],[1018,364],[1018,364],[1018,365],[1018,365],[1019,366],[1019,366],[1020,367],[1020,367],[1021,368],[1021,368],[1022,369],[1022,369],[1023,370],[1023,370],[1024,371],[1024,371],[1025,372],[1025,372],[1027,373],[1027,373],[1028,374],[1028,374],[1029,375],[1029,375],[1031,376],[1031,376],[1033,377],[1033,377],[1035,378],[1035,378],[1037,379],[1037,379],[1040,380],[1040,380],[1044,381]],
"COL": [[392,454],[392,453],[391,453],[390,453],[389,453],[387,452],[387,452],[387,452],[387,452],[387,452],[385,451],[385,451],[385,451],[385,451],[385,451],[384,450],[384,450],[384,450],[384,450],[384,450],[384,450],[383,449],[383,449],[383,449],[383,449],[383,449],[382,448],[382,448],[382,448],[382,448],[382,448],[381,447],[381,447],[381,447],[381,447],[381,447],[381,446],[381,446],[381,446],[381,446],[381,446],[381,446],[380,445],[380,445],[380,445],[380,445],[380,445],[380,444],[380,444],[380,444],[380,444],[380,444],[379,443],[379,443],[379,443],[379,443],[379,443],[379,442],[379,442],[379,442],[379,442],[379,442],[379,442],[379,441],[379,441],[379,441],[379,441],[379,441],[379,440],[379,440],[379,440],[379,440],[379,440],[379,439],[379,439],[379,439],[379,439],[379,439],[379,438],[379,438],[379,438],[379,438],[379,438],[379,438],[379,437],[379,437],[379,437],[379,437],[379,437],[379,436],[379,436],[379,436],[379,436],[379,436],[379,435],[379,435],[379,435],[379,435],[379,435],[380,435]],
// -> DEU
"CZE": [[707,274],[707,274],[707,274],[706,274],[706,274],[706,274],[705,275],[705,275],[705,275],[704,275],[704,275],[704,275],[703,275],[703,275],[703,275],[702,276],[702,276],[702,276],[701,276],[701,276],[701,276],[700,276],[700,276],[700,276],[699,276],[699,276],[699,276],[698,276],[698,276],[698,276],[697,276],[697,276],[697,276],[696,277],[696,277],[696,277],[695,276],[695,276],[695,276],[694,276],[694,276],[694,276],[693,276],[693,276],[693,276],[692,276],[692,276],[692,276],[691,276],[691,276],[691,276],[690,276],[690,276],[690,276],[689,275],[689,275],[689,275],[688,275],[688,275],[688,275],[687,275],[687,275],[687,275],[686,274],[686,274],[686,274],[685,274],[685,274],[685,274],[684,273],[684,273],[684,273],[683,273],[683,273],[683,273],[682,272],[682,272],[682,272],[681,271],[681,271],[681,271],[680,270],[680,270],[680,270],[679,269],[679,269],[679,269],[678,268],[678,268],[678,268],[677,267],[677,267],[677,267],[676,266],[676,266],[676,266],[675,264],[675,264],[675,264],[675,264]],
// Algeria -> Morocco, Tunisia
"DZA": [[654,357],[654,357],[653,355],[653,355],[653,355],[652,354],[652,354],[651,353],[651,353],[651,353],[650,352],[650,352],[649,351],[649,351],[649,351],[648,350],[648,350],[647,349],[647,349],[647,349],[646,348],[646,348],[646,348],[645,347],[645,347],[644,347],[644,347],[644,347],[643,346],[643,346],[642,346],[642,346],[642,346],[641,345],[641,345],[640,345],[640,345],[640,345],[639,344],[639,344],[639,344],[638,344],[638,344],[637,344],[637,344],[637,344],[636,343],[636,343],[635,343],[635,343],[635,343],[634,343],[634,343],[633,343],[633,343],[633,343],[632,343],[632,343],[631,343],[631,343],[631,343],[630,343],[630,343],[630,343],[629,343],[629,343],[628,343],[628,343],[628,343],[627,343],[627,343],[626,343],[626,343],[626,343],[625,343],[625,343],[624,343],[624,343],[624,343],[623,343],[623,343],[623,343],[622,343],[622,343],[621,344],[621,344],[621,344],[620,344],[620,344],[619,344],[619,344],[619,344],[618,345],[618,345],[617,345],[617,345],[617,345],[616,346],[616,346],[616,346]],
// Algeria -> Tunisia [677,332]
"DZA2":[[654,357],[654,356],[653,356],[653,356],[653,355],[653,355],[653,355],[653,355],[653,354],[653,354],[653,354],[653,354],[653,353],[653,353],[653,353],[653,353],[653,352],[653,352],[653,352],[653,352],[653,351],[653,351],[653,351],[653,351],[653,350],[653,350],[653,350],[653,350],[653,349],[653,349],[653,349],[653,349],[654,348],[654,348],[654,348],[654,348],[654,347],[654,347],[654,347],[654,347],[654,346],[654,346],[654,346],[654,346],[655,345],[655,345],[655,345],[655,345],[655,344],[655,344],[655,344],[655,344],[656,343],[656,343],[656,343],[656,343],[656,342],[656,342],[656,342],[656,342],[657,341],[657,341],[657,341],[657,341],[658,340],[658,340],[658,340],[658,340],[659,339],[659,339],[659,339],[659,339],[660,338],[660,338],[660,338],[660,338],[661,337],[661,337],[661,337],[661,337],[662,336],[662,336],[662,336],[662,336],[663,335],[663,335],[664,335],[665,335],[666,334],[667,334],[668,334],[669,334],[670,333],[671,333],[672,333],[673,333],[674,332],[675,332],[676,332],[677,332]],
// Eritrea - Sudan
"ERI": [[777,403],[776,402],[775,400],[775,400],[775,400],[774,399],[774,399],[774,399],[773,399],[773,399],[773,399],[772,398],[772,398],[772,398],[771,397],[771,397],[771,397],[770,397],[770,397],[770,397],[769,396],[769,396],[768,396],[768,396],[768,396],[767,395],[767,395],[767,395],[766,395],[766,395],[766,395],[765,395],[765,395],[765,395],[764,394],[764,394],[764,394],[763,394],[763,394],[763,394],[762,394],[762,394],[761,394],[761,394],[761,394],[760,394],[760,394],[760,394],[759,394],[759,394],[759,394],[758,394],[758,394],[758,394],[757,394],[757,394],[757,394],[756,394],[756,394],[756,394],[755,394],[755,394],[754,394],[754,394],[754,394],[753,394],[753,394],[753,394],[752,394],[752,394],[752,394],[751,395],[751,395],[751,395],[750,395],[750,395],[750,395],[749,395],[749,395],[749,395],[748,396],[748,396],[747,396],[747,396],[747,396],[746,397],[746,397],[746,397],[745,397],[745,397],[745,397],[744,398],[744,398],[744,398],[743,399],[743,399],[743,399],[742,399],[742,400],[742,401]],
// Ethiopia - Somalia
"ETH": [[781,429],[781,430],[781,431],[781,432],[781,433],[782,435],[782,435],[782,435],[782,435],[782,435],[783,437],[783,437],[783,437],[783,437],[783,437],[784,438],[784,438],[784,438],[784,438],[784,438],[785,439],[785,439],[785,439],[785,439],[785,439],[786,440],[786,440],[786,440],[786,440],[786,440],[787,441],[787,441],[787,441],[787,441],[787,441],[788,442],[788,442],[788,442],[788,442],[788,442],[789,443],[789,443],[789,443],[789,443],[789,443],[790,443],[790,443],[790,443],[790,443],[790,443],[791,444],[791,444],[791,444],[791,444],[791,444],[792,444],[792,444],[792,444],[792,444],[792,444],[793,445],[793,445],[793,445],[793,445],[793,445],[794,445],[794,445],[794,445],[794,445],[794,445],[795,445],[795,445],[795,445],[795,445],[795,445],[796,445],[796,445],[796,445],[796,445],[796,445],[797,445],[797,445],[797,445],[797,445],[797,445],[798,445],[798,445],[798,445],[798,445],[798,445],[799,446],[799,446],[799,446],[799,446],[799,446],[800,445],[800,445],[800,445],[800,446],[801,446]],
// Abkhazia, Ossetia -> Russia (TODO: Georgia)
"GEO": [[795,302],[796,299],[798,294],[800,290],[802,286],[804,283],[806,279],[808,276],[809,275],[811,272],[813,269],[815,266],[817,264],[819,261],[821,259],[822,258],[824,256],[826,253],[828,251],[830,250],[832,248],[834,246],[835,245],[837,243],[839,242],[841,240],[843,239],[845,237],[847,236],[848,235],[850,234],[852,232],[854,231],[856,230],[858,229],[860,228],[861,227],[863,226],[865,225],[867,224],[869,223],[871,222],[873,221],[874,221],[876,220],[878,219],[880,218],[882,218],[884,217],[886,216],[888,216],[889,215],[891,215],[893,214],[895,214],[897,213],[899,213],[901,212],[902,212],[904,212],[906,212],[908,211],[910,211],[912,211],[914,210],[915,210],[917,210],[919,210],[921,210],[923,210],[925,210],[927,210],[928,210],[930,210],[932,210],[934,210],[936,210],[938,210],[940,210],[941,210],[943,210],[945,210],[947,211],[949,211],[951,211],[953,211],[954,212],[956,212],[958,212],[960,213],[962,213],[964,214],[966,214],[967,214],[969,215],[971,215],[973,216],[975,217],[977,217],[979,218]],
// Guatemala -> Mexico (285,369)
"GTM": [[328,399],[328,399],[327,395],[327,395],[326,392],[326,392],[325,390],[325,390],[325,390],[324,388],[324,388],[323,386],[323,386],[322,385],[322,385],[321,384],[321,384],[321,384],[320,382],[320,382],[319,381],[319,381],[318,380],[318,380],[317,379],[317,379],[317,379],[316,378],[316,378],[315,377],[315,377],[314,376],[314,376],[314,376],[313,376],[313,376],[312,375],[312,375],[311,374],[311,374],[310,373],[310,373],[310,373],[309,373],[309,373],[308,372],[308,372],[307,372],[307,372],[306,371],[306,371],[306,371],[305,371],[305,371],[304,370],[304,370],[303,370],[303,370],[303,370],[302,370],[302,370],[301,369],[301,369],[300,369],[300,369],[299,369],[299,369],[299,369],[298,369],[298,369],[297,368],[297,368],[296,368],[296,368],[295,368],[295,368],[295,368],[294,368],[294,368],[293,368],[293,368],[292,368],[292,368],[292,368],[291,368],[291,368],[290,368],[290,368],[289,368],[289,368],[288,368],[288,368],[288,368],[287,368],[287,368],[286,368],[286,368],[285,368],[285,368],[285,368]],
// Guatemala -> Honduras (340,408), Belize (335,401), Costa Rica (352,426),
"GTM2":[[328,399],[328,398],[328,398],[328,398],[328,398],[328,398],[328,398],[328,398],[328,398],[329,398],[329,398],[329,398],[329,398],[329,398],[329,398],[329,398],[329,398],[330,398],[330,398],[330,398],[330,398],[330,398],[330,398],[330,398],[330,398],[331,398],[331,398],[331,398],[331,398],[331,398],[331,398],[331,398],[331,398],[331,398],[332,398],[332,398],[332,398],[332,398],[332,398],[332,398],[332,398],[332,398],[333,398],[333,398],[333,398],[333,398],[333,398],[333,398],[333,398],[333,398],[334,399],[334,399],[334,399],[334,399],[334,399],[334,399],[334,399],[334,399],[334,399],[335,399],[335,399],[335,399],[335,399],[335,399],[335,399],[335,399],[335,399],[336,400],[336,400],[336,400],[336,400],[336,400],[336,400],[336,400],[336,400],[337,401],[337,401],[337,401],[337,401],[337,401],[337,401],[337,401],[337,401],[337,401],[338,402],[338,402],[338,402],[338,402],[338,402],[338,402],[338,402],[338,402],[339,404],[339,404],[339,404],[339,404],[339,404],[339,404],[339,404],[340,404]],
//Croatia -> neighboring countries (Italy)
"HRV": [[696,288],[696,288],[696,288],[696,288],[696,288],[696,288],[696,288],[694,289],[694,289],[694,289],[694,289],[694,289],[694,289],[694,289],[692,290],[692,290],[692,290],[692,290],[692,290],[692,290],[692,290],[691,291],[691,291],[691,291],[691,291],[691,291],[691,291],[690,292],[690,292],[690,292],[690,292],[690,292],[690,292],[690,292],[690,293],[690,293],[690,293],[690,293],[690,293],[690,293],[690,293],[689,294],[689,294],[689,294],[689,294],[689,294],[689,294],[689,295],[689,295],[689,295],[689,295],[689,295],[689,295],[689,295],[688,296],[688,296],[688,296],[688,296],[688,296],[688,296],[688,296],[688,297],[688,297],[688,297],[688,297],[688,297],[688,297],[688,298],[688,298],[688,298],[688,298],[688,298],[688,298],[688,298],[688,299],[688,299],[688,299],[688,299],[688,299],[688,299],[688,299],[688,300],[688,300],[688,300],[688,300],[688,300],[688,300],[688,301],[688,301],[688,301],[688,301],[688,301],[688,301],[688,301],[688,302],[688,302],[688,302],[688,302],[688,302],[688,302]],
// Hungary -> Austria
// TODO: Hungary -> Yugoslavia
"HUN": [[709,282],[709,282],[709,282],[709,282],[709,282],[709,282],[708,281],[708,281],[708,281],[708,281],[708,281],[708,281],[707,280],[707,280],[707,280],[707,280],[707,280],[707,280],[706,279],[706,279],[706,279],[706,279],[706,279],[706,279],[705,279],[705,279],[705,279],[705,279],[705,279],[705,279],[705,279],[704,278],[704,278],[704,278],[704,278],[704,278],[704,278],[703,278],[703,278],[703,278],[703,278],[703,278],[703,278],[702,278],[702,278],[702,278],[702,278],[702,278],[702,278],[701,278],[701,278],[701,278],[701,278],[701,278],[701,278],[701,278],[700,278],[700,278],[700,278],[700,278],[700,278],[700,278],[699,278],[699,278],[699,278],[699,278],[699,278],[699,278],[698,278],[698,278],[698,278],[698,278],[698,278],[698,278],[697,278],[697,278],[697,278],[697,278],[697,278],[697,278],[697,278],[696,278],[696,278],[696,278],[696,278],[696,278],[696,278],[695,279],[695,279],[695,279],[695,279],[695,279],[695,279],[694,279],[694,279],[694,279],[694,279],[694,279],[694,279],[694,280]],
// Iraq -> Turkey
"IRQ": [[794,337],[794,337],[793,333],[793,333],[793,333],[792,331],[792,331],[791,329],[791,329],[791,329],[790,327],[790,327],[790,327],[789,326],[789,326],[788,325],[788,325],[788,325],[787,323],[787,323],[787,323],[786,322],[786,322],[785,321],[785,321],[785,321],[784,320],[784,320],[783,320],[783,320],[783,320],[782,319],[782,319],[782,319],[781,318],[781,318],[780,317],[780,317],[780,317],[779,317],[779,317],[779,317],[778,316],[778,316],[777,316],[777,316],[777,316],[776,315],[776,315],[775,315],[775,315],[775,315],[774,314],[774,314],[774,314],[773,314],[773,314],[772,314],[772,314],[772,314],[771,314],[771,314],[771,314],[770,313],[770,313],[769,313],[769,313],[769,313],[768,313],[768,313],[768,313],[767,313],[767,313],[766,313],[766,313],[766,313],[765,313],[765,313],[764,313],[764,313],[764,313],[763,313],[763,313],[763,313],[762,313],[762,313],[761,313],[761,313],[761,313],[760,313],[760,313],[760,313],[759,313],[759,313],[758,313],[758,313],[758,313],[757,313],[757,313],[757,313]],
// ->  Iran [831,340]
"IRQ2":[[794,337],[794,336],[794,336],[795,335],[795,335],[795,335],[796,334],[796,334],[796,334],[797,334],[797,334],[798,333],[798,333],[798,333],[799,332],[799,332],[799,332],[800,332],[800,332],[801,332],[801,332],[801,332],[802,331],[802,331],[802,331],[803,331],[803,331],[803,331],[804,330],[804,330],[805,330],[805,330],[805,330],[806,330],[806,330],[806,330],[807,330],[807,330],[808,330],[808,330],[808,330],[809,330],[809,330],[809,330],[810,330],[810,330],[811,330],[811,330],[811,330],[812,330],[812,330],[812,330],[813,330],[813,330],[813,330],[814,330],[814,330],[815,330],[815,330],[815,330],[816,330],[816,330],[816,330],[817,330],[817,330],[818,330],[818,330],[818,330],[819,331],[819,331],[819,331],[820,331],[820,331],[821,332],[821,332],[821,332],[822,332],[822,332],[822,332],[823,332],[823,332],[823,332],[824,333],[824,333],[825,334],[825,334],[825,334],[826,334],[826,334],[826,334],[827,335],[827,335],[828,336],[828,336],[828,336],[829,337],[830,337],[831,338],[831,339],[831,340]],
// ISR -> Egypt
// TODO: -> Jordan, Syria
"ISR": [[765,345],[765,344],[765,344],[765,344],[764,344],[764,344],[764,344],[764,344],[764,344],[763,344],[763,344],[763,344],[763,344],[762,344],[762,344],[762,344],[762,344],[762,344],[761,344],[761,344],[761,344],[761,344],[760,344],[760,344],[760,344],[760,344],[760,344],[759,344],[759,344],[759,344],[759,344],[758,344],[758,344],[758,344],[758,344],[758,344],[757,344],[757,344],[757,344],[757,344],[756,345],[756,345],[756,345],[756,345],[756,345],[755,345],[755,345],[755,345],[755,345],[755,345],[754,346],[754,346],[754,346],[754,346],[753,346],[753,346],[753,346],[753,346],[753,346],[752,347],[752,347],[752,347],[752,347],[751,348],[751,348],[751,348],[751,348],[751,348],[750,348],[750,348],[750,348],[750,348],[749,349],[749,349],[749,349],[749,349],[749,349],[748,350],[748,350],[748,350],[748,350],[747,352],[747,352],[747,352],[747,352],[747,352],[746,353],[746,353],[746,353],[746,353],[745,355],[745,355],[745,356],[745,357],[745,358],[744,359],[744,360],[744,361],[744,362],[744,363]],
//Path from IND to PAK
"IND": [[919,392],[919,392],[918,388],[918,388],[917,385],[917,385],[917,385],[916,383],[916,383],[915,381],[915,381],[914,379],[914,379],[914,379],[913,378],[913,378],[912,377],[912,377],[912,377],[911,375],[911,375],[910,374],[910,374],[909,373],[909,373],[909,373],[908,372],[908,372],[907,371],[907,371],[906,370],[906,370],[906,370],[905,369],[905,369],[904,369],[904,369],[904,369],[903,368],[903,368],[902,367],[902,367],[901,366],[901,366],[901,366],[900,366],[900,366],[899,365],[899,365],[898,365],[898,365],[898,365],[897,364],[897,364],[896,364],[896,364],[896,364],[895,363],[895,363],[894,363],[894,363],[893,363],[893,363],[893,363],[892,362],[892,362],[891,362],[891,362],[891,362],[890,362],[890,362],[889,362],[889,362],[888,361],[888,361],[888,361],[887,361],[887,361],[886,361],[886,361],[885,361],[885,361],[885,361],[884,361],[884,361],[883,361],[883,361],[883,361],[882,361],[882,361],[881,361],[881,361],[880,361],[880,361],[880,361],[879,361],[879,361],[878,361],[878,361],[878,361]],
// Indonesian -> Indonesia
"IDN": [[1064,471],[1063,470],[1063,470],[1062,469],[1062,469],[1061,468],[1060,468],[1060,468],[1059,467],[1059,467],[1058,466],[1057,465],[1057,465],[1056,465],[1056,465],[1055,464],[1054,464],[1054,464],[1053,463],[1053,463],[1052,463],[1052,463],[1051,462],[1050,462],[1050,462],[1049,461],[1049,461],[1048,461],[1047,461],[1047,461],[1046,460],[1046,460],[1045,460],[1044,460],[1044,460],[1043,459],[1043,459],[1042,459],[1041,459],[1041,459],[1040,459],[1040,459],[1039,459],[1039,459],[1038,459],[1037,459],[1037,459],[1036,459],[1036,459],[1035,459],[1034,459],[1034,459],[1033,459],[1033,459],[1032,459],[1031,459],[1031,459],[1030,459],[1030,459],[1029,459],[1029,459],[1028,459],[1027,459],[1027,459],[1026,459],[1026,459],[1025,459],[1024,460],[1024,460],[1023,460],[1023,460],[1022,460],[1021,461],[1021,461],[1020,461],[1020,461],[1019,461],[1018,462],[1018,462],[1017,462],[1017,462],[1016,463],[1016,463],[1015,463],[1014,464],[1014,464],[1013,464],[1013,464],[1012,465],[1011,465],[1011,465],[1010,466],[1010,466],[1009,467],[1008,468],[1008,468],[1007,468],[1007,468],[1006,469],[1006,469]],
//Cambodia-> Thailand
"KHM": [[1008,415],[1007,415],[1006,415],[1006,415],[1004,416],[1004,416],[1004,416],[1004,416],[1003,417],[1003,417],[1003,417],[1002,418],[1002,418],[1002,418],[1002,418],[1000,419],[1000,419],[1000,419],[999,420],[999,420],[999,420],[999,420],[999,421],[999,421],[999,421],[999,421],[998,422],[998,422],[998,422],[997,423],[997,423],[997,423],[997,423],[996,424],[996,424],[996,424],[996,425],[996,425],[996,425],[996,425],[995,426],[995,426],[995,426],[995,427],[995,427],[995,427],[995,427],[995,428],[995,428],[995,428],[995,428],[994,429],[994,429],[994,429],[994,430],[994,430],[994,430],[994,430],[994,431],[994,431],[994,431],[994,432],[994,432],[994,432],[994,432],[994,433],[994,433],[994,433],[994,434],[994,434],[994,434],[994,434],[994,435],[994,435],[994,435],[994,435],[994,436],[994,436],[994,436],[994,437],[994,437],[994,437],[994,437],[994,438],[994,438],[994,438],[994,439],[994,439],[994,439],[994,439],[994,440],[994,440],[994,440],[994,441],[994,441],[994,441],[994,441],[995,442],[995,442],[995,442]],
// Lao -> Thailand
"LAO": [[1001,392],[1000,392],[999,393],[998,393],[997,394],[997,394],[996,395],[996,395],[995,396],[995,396],[994,397],[994,397],[993,398],[993,398],[993,399],[993,399],[992,400],[992,400],[991,401],[991,401],[991,402],[991,402],[990,403],[990,403],[990,404],[990,404],[989,405],[989,405],[989,406],[989,406],[989,407],[989,407],[988,408],[988,408],[988,409],[988,409],[988,410],[988,410],[987,411],[987,411],[987,412],[987,412],[987,413],[987,413],[987,414],[987,414],[987,415],[987,415],[987,416],[987,416],[987,417],[987,418],[987,418],[987,419],[987,419],[987,420],[987,420],[987,421],[987,421],[987,422],[987,422],[987,423],[987,423],[987,424],[987,424],[987,425],[987,425],[987,426],[987,426],[987,427],[987,427],[988,428],[988,428],[988,429],[988,429],[988,430],[988,430],[989,431],[989,431],[989,432],[989,432],[989,433],[989,433],[990,434],[990,434],[990,435],[990,435],[991,436],[991,436],[991,437],[991,437],[992,438],[992,438],[993,439],[993,439],[993,440],[993,440],[994,441],[994,442],[995,443]],
// Burma/Myanmar -> Bangladesh
"MMR": [[973,379],[973,379],[973,379],[973,379],[973,379],[973,379],[973,379],[972,378],[972,378],[972,378],[972,378],[972,378],[972,378],[972,378],[972,378],[971,377],[971,377],[971,377],[971,377],[971,377],[971,377],[971,377],[971,377],[970,376],[970,376],[970,376],[970,376],[970,376],[970,376],[970,376],[969,376],[969,376],[969,376],[969,376],[969,376],[969,376],[969,376],[969,376],[968,376],[968,376],[968,376],[968,376],[968,376],[968,376],[968,376],[968,376],[967,376],[967,376],[967,376],[967,376],[967,376],[967,376],[967,376],[966,376],[966,376],[966,376],[966,376],[966,376],[966,376],[966,376],[966,376],[965,376],[965,376],[965,376],[965,376],[965,376],[965,376],[965,376],[965,376],[964,376],[964,376],[964,376],[964,376],[964,376],[964,376],[964,376],[963,376],[963,376],[963,376],[963,376],[963,376],[963,376],[963,376],[963,376],[962,376],[962,376],[962,376],[962,376],[962,376],[962,376],[962,376],[962,376],[961,377],[961,377],[961,377],[961,377],[961,377],[961,377],[961,377],[961,377]],
// Mozambique -> Malawi
"MOZ": [[761,532],[761,531],[761,531],[762,530],[762,530],[762,530],[763,529],[763,529],[763,529],[763,529],[763,528],[763,528],[763,528],[764,527],[764,527],[764,527],[764,526],[764,526],[764,526],[764,526],[765,525],[765,525],[765,525],[765,524],[765,524],[765,524],[766,523],[766,523],[766,523],[766,523],[766,522],[766,522],[766,522],[766,521],[766,521],[766,521],[766,520],[766,520],[766,520],[766,520],[766,519],[766,519],[766,519],[766,518],[766,518],[766,518],[767,517],[767,517],[767,517],[767,517],[766,516],[766,516],[766,516],[766,515],[766,515],[766,515],[766,514],[766,514],[766,514],[766,514],[766,513],[766,513],[766,513],[766,512],[766,512],[766,512],[766,511],[766,511],[766,511],[766,511],[765,510],[765,510],[765,510],[765,509],[765,509],[765,509],[764,508],[764,508],[764,508],[764,508],[764,507],[764,507],[764,507],[763,506],[763,506],[763,506],[763,505],[763,505],[763,505],[763,505],[762,504],[762,504],[762,504],[761,503],[761,503],[761,503],[760,502],[760,502],[761,502],[761,502]],
// Nicaragua -> Mexico (285,369)
// TODO: -> Honduras (340,408), Belize (335,401), Costa Rica (352,426), 
"NIC": [[346,416],[345,415],[344,415],[343,415],[342,415],[342,415],[341,415],[341,415],[340,415],[339,415],[339,415],[338,416],[338,416],[337,415],[336,415],[336,415],[335,415],[335,415],[334,415],[333,415],[333,415],[332,415],[331,415],[331,415],[330,415],[330,415],[329,415],[328,415],[328,415],[327,414],[327,414],[326,414],[325,414],[325,414],[324,414],[324,414],[323,413],[322,413],[322,413],[321,413],[320,412],[320,412],[319,412],[319,412],[318,412],[317,411],[317,411],[316,411],[316,411],[315,410],[314,410],[314,410],[313,409],[313,409],[312,409],[311,408],[311,408],[310,408],[310,408],[309,407],[308,406],[308,406],[307,406],[306,405],[306,405],[305,404],[305,404],[304,403],[303,403],[303,403],[302,402],[302,402],[301,401],[300,400],[300,400],[299,399],[299,399],[298,398],[297,397],[297,397],[296,395],[295,394],[295,394],[294,393],[294,393],[293,391],[292,390],[292,390],[291,388],[291,388],[290,386],[289,384],[289,384],[288,382],[288,382],[287,379],[286,376],[286,376],[285,372],[285,372]],	
// Nigeria -> Nigeria
"NGA": [[660,431],[660,430],[660,429],[660,429],[661,427],[661,427],[661,427],[661,427],[662,426],[662,426],[662,426],[662,426],[663,425],[663,425],[663,425],[663,425],[664,424],[664,424],[664,424],[664,424],[665,424],[665,424],[665,424],[665,424],[666,423],[666,423],[666,423],[666,423],[667,422],[667,422],[667,422],[667,422],[668,422],[668,422],[668,422],[668,422],[669,422],[669,422],[669,422],[669,422],[670,421],[670,421],[670,421],[670,421],[671,421],[671,421],[671,421],[671,421],[672,421],[672,421],[672,421],[672,421],[673,421],[673,421],[673,421],[673,421],[674,421],[674,421],[674,421],[674,421],[675,421],[675,421],[675,421],[675,421],[676,421],[676,421],[676,421],[676,421],[677,421],[677,421],[677,421],[677,421],[678,421],[678,421],[678,421],[678,421],[679,421],[679,421],[679,421],[679,421],[680,421],[680,421],[680,421],[680,421],[681,422],[681,422],[681,422],[681,422],[682,422],[682,422],[682,422],[682,422],[683,422],[683,422],[683,422],[683,422],[684,423],[684,423],[684,424],[685,424]],
//-> IND
"PAK":  [[878,362],[878,362],[878,362],[879,370],[879,370],[879,370],[880,374],[880,374],[881,376],[881,376],[881,376],[882,378],[882,378],[882,378],[883,380],[883,380],[884,382],[884,382],[884,382],[885,383],[885,383],[885,383],[886,385],[886,385],[887,386],[887,386],[887,386],[888,387],[888,387],[889,388],[889,388],[889,388],[890,389],[890,389],[890,389],[891,390],[891,390],[892,391],[892,391],[892,391],[893,392],[893,392],[893,392],[894,392],[894,392],[895,393],[895,393],[895,393],[896,394],[896,394],[896,394],[897,394],[897,394],[898,395],[898,395],[898,395],[899,395],[899,395],[900,396],[900,396],[900,396],[901,396],[901,396],[901,396],[902,397],[902,397],[903,397],[903,397],[903,397],[904,398],[904,398],[904,398],[905,398],[905,398],[906,398],[906,398],[906,398],[907,398],[907,398],[908,399],[908,399],[908,399],[909,399],[909,399],[909,399],[910,399],[910,399],[911,399],[911,399],[911,399],[912,399],[912,399],[912,399],[913,399],[913,399],[914,399],[914,399],[914,399],[915,399],[915,399]],
// Palestine to Israel: to close to show visible path!!
// TODO: Palestine to Syria, Jordan?
"PSE": [[766,345],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,344],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,343],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,342],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[765,341],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[766,340],[767,340],[768,340]],
//-> DEU
"POL": [[710,253],[709,252],[708,252],[708,252],[708,252],[707,251],[707,251],[707,251],[706,251],[706,251],[706,251],[705,250],[705,250],[705,250],[704,250],[704,250],[704,250],[703,250],[703,250],[703,250],[702,250],[702,250],[701,250],[701,250],[701,250],[700,250],[700,250],[700,250],[699,250],[699,250],[699,250],[698,250],[698,250],[698,250],[697,250],[697,250],[697,250],[696,250],[696,250],[696,250],[695,250],[695,250],[694,250],[694,250],[694,250],[693,250],[693,250],[693,250],[692,250],[692,250],[692,250],[691,250],[691,250],[691,250],[690,251],[690,251],[690,251],[689,251],[689,251],[689,251],[688,252],[688,252],[687,252],[687,252],[687,252],[686,252],[686,252],[686,252],[685,253],[685,253],[685,253],[684,254],[684,254],[684,254],[683,254],[683,254],[683,254],[682,255],[682,255],[682,255],[681,256],[681,256],[680,257],[680,257],[680,257],[679,258],[679,258],[679,258],[678,259],[678,259],[678,259],[677,260],[677,260],[677,260],[676,262],[676,262],[676,262],[675,263],[675,263],[675,264]],
// -> DEU
//Chechnya/Russia -> Russia
"RUS": [[981,219],[974,213],[971,211],[968,209],[965,207],[962,205],[959,204],[956,202],[953,200],[950,199],[947,197],[944,196],[941,194],[938,193],[935,192],[932,190],[928,189],[925,188],[922,187],[919,186],[916,185],[913,184],[910,183],[907,182],[904,181],[901,181],[898,180],[895,179],[892,179],[889,178],[886,177],[883,177],[880,177],[876,176],[873,176],[870,175],[867,175],[864,175],[861,175],[858,175],[855,175],[852,175],[849,175],[846,175],[843,175],[840,175],[837,175],[834,175],[831,175],[827,176],[824,176],[821,176],[818,177],[815,177],[812,178],[809,178],[806,179],[803,180],[800,180],[797,181],[794,182],[791,183],[788,183],[785,184],[782,185],[779,186],[775,188],[772,189],[769,190],[766,191],[763,193],[760,194],[757,195],[754,197],[751,198],[748,200],[745,201],[742,203],[739,205],[736,207],[733,208],[730,210],[727,212],[723,215],[720,217],[717,220],[714,222],[711,224],[708,227],[705,229],[702,232],[699,235],[696,238],[693,241],[690,244],[687,247],[684,251],[681,254],[678,258],[675,262]],
// Rwanda -> Congo
// TODO: Burundi, Zaire, Burundi
"RWA": [[747,468],[747,467],[747,466],[747,466],[746,466],[746,466],[746,466],[746,466],[745,465],[745,465],[745,465],[745,465],[744,464],[744,464],[744,464],[744,464],[743,464],[743,464],[743,464],[743,464],[742,463],[742,463],[742,463],[742,463],[742,463],[741,463],[741,463],[741,463],[741,463],[740,462],[740,462],[740,462],[740,462],[739,462],[739,462],[739,462],[739,462],[738,462],[738,462],[738,462],[738,462],[737,462],[737,462],[737,462],[737,462],[736,462],[736,462],[736,462],[736,462],[736,462],[735,462],[735,462],[735,462],[735,462],[734,462],[734,462],[734,462],[734,462],[733,462],[733,462],[733,462],[733,462],[732,462],[732,462],[732,462],[732,462],[731,462],[731,462],[731,462],[731,462],[730,462],[730,462],[730,462],[730,462],[730,462],[729,463],[729,463],[729,463],[729,463],[728,463],[728,463],[728,463],[728,463],[727,464],[727,464],[727,464],[727,464],[726,464],[726,464],[726,464],[726,464],[725,465],[725,465],[725,465],[725,465],[724,466],[724,466],[724,466],[724,466],[724,467]],
// -> Uganda [757,454]
"RWA2":[[747,468],[747,467],[746,467],[746,467],[746,467],[746,467],[746,467],[746,466],[746,466],[746,466],[746,466],[746,466],[746,466],[746,466],[746,465],[746,465],[746,465],[746,465],[746,465],[746,465],[746,465],[746,464],[746,464],[746,464],[746,464],[746,464],[746,464],[746,464],[746,463],[746,463],[746,463],[746,463],[746,463],[746,463],[746,463],[746,462],[746,462],[746,462],[746,462],[746,462],[746,462],[746,462],[746,461],[746,461],[746,461],[746,461],[746,461],[746,461],[746,461],[747,460],[747,460],[747,460],[747,460],[747,460],[747,460],[747,460],[747,460],[747,459],[747,459],[747,459],[747,459],[747,459],[747,459],[747,459],[748,458],[748,458],[748,458],[748,458],[748,458],[748,458],[748,458],[749,457],[749,457],[749,457],[749,457],[749,457],[749,457],[749,457],[750,456],[750,456],[750,456],[750,456],[750,456],[750,456],[750,456],[751,455],[751,455],[751,455],[751,455],[751,455],[751,455],[751,455],[753,454],[753,454],[753,454],[753,454],[754,454],[755,454],[756,454],[757,454]],
// -> Tanzania [767,480]
"RWA3":[[747,468],[747,467],[747,467],[747,467],[747,467],[748,467],[748,467],[748,467],[748,467],[748,467],[749,467],[749,467],[749,467],[749,467],[749,467],[750,467],[750,467],[750,467],[750,467],[750,467],[751,467],[751,467],[751,467],[751,467],[751,467],[752,467],[752,467],[752,467],[752,467],[752,467],[753,467],[753,467],[753,467],[753,467],[753,467],[754,467],[754,467],[754,467],[754,467],[754,467],[755,467],[755,467],[755,467],[755,467],[755,467],[756,467],[756,467],[756,467],[756,467],[756,467],[757,468],[757,468],[757,468],[757,468],[757,468],[758,468],[758,468],[758,468],[758,468],[758,468],[759,469],[759,469],[759,469],[759,469],[759,469],[760,469],[760,469],[760,469],[760,469],[760,469],[761,470],[761,470],[761,470],[761,470],[761,470],[762,471],[762,471],[762,471],[762,471],[762,471],[763,472],[763,472],[763,472],[763,472],[763,472],[764,473],[764,473],[764,473],[764,473],[764,473],[765,475],[765,475],[765,475],[765,475],[765,475],[766,476],[767,477],[767,478],[767,479],[767,480]],
// El Savador -> Mexico (285,369)
// TODO: -> Honduras (340,408), Belize (335,401), Costa Rica (352,426), 
"SLV": [[333,412],[332,411],[331,411],[331,411],[330,412],[330,412],[329,411],[329,411],[328,411],[328,411],[327,411],[327,411],[326,411],[326,411],[325,411],[325,411],[324,411],[324,411],[323,411],[323,411],[322,411],[322,411],[321,411],[321,411],[321,411],[320,410],[320,410],[319,410],[319,410],[318,410],[318,410],[317,410],[317,410],[316,409],[316,409],[315,409],[315,409],[314,409],[314,409],[313,408],[313,408],[312,408],[312,408],[311,407],[311,407],[310,407],[310,407],[309,406],[309,406],[309,406],[308,406],[308,406],[307,405],[307,405],[306,405],[306,405],[305,404],[305,404],[304,403],[304,403],[303,403],[303,403],[302,402],[302,402],[301,401],[301,401],[300,400],[300,400],[299,399],[299,399],[298,399],[298,399],[297,398],[297,398],[297,398],[296,396],[296,396],[295,395],[295,395],[294,394],[294,394],[293,393],[293,393],[292,391],[292,391],[291,390],[291,390],[290,388],[290,388],[289,386],[289,386],[288,384],[288,384],[287,382],[287,382],[286,379],[286,379],[285,375],[285,375],[285,375]], 
// Kosovo/Serbia - Western Europe [677,281]
// -> Albania, Macedonia, Montenegro, Western Europe
"SRB": [[715,301],[715,301],[714,301],[714,301],[714,301],[713,302],[713,302],[712,302],[712,302],[712,302],[711,302],[711,302],[710,302],[710,302],[710,302],[709,302],[709,302],[708,302],[708,302],[708,302],[707,302],[707,302],[707,302],[706,303],[706,303],[705,302],[705,302],[705,302],[704,302],[704,302],[703,302],[703,302],[703,302],[702,302],[702,302],[701,302],[701,302],[701,302],[700,302],[700,302],[700,302],[699,302],[699,302],[698,301],[698,301],[698,301],[697,301],[697,301],[696,301],[696,301],[696,301],[695,300],[695,300],[694,300],[694,300],[694,300],[693,300],[693,300],[692,299],[692,299],[692,299],[691,299],[691,299],[691,299],[690,298],[690,298],[689,297],[689,297],[689,297],[688,297],[688,297],[687,296],[687,296],[687,296],[686,295],[686,295],[685,294],[685,294],[685,294],[684,293],[684,293],[684,293],[683,292],[683,292],[682,291],[682,291],[682,291],[681,290],[681,290],[680,288],[680,288],[680,288],[679,287],[679,287],[678,285],[678,285],[678,285],[677,282],[677,282],[677,282]],
// South Sudan civil war
"SSD": [[740,434],[740,433],[740,433],[740,433],[740,433],[740,433],[741,432],[741,432],[741,432],[741,432],[741,432],[741,432],[742,432],[742,432],[742,432],[742,432],[742,432],[743,431],[743,431],[743,431],[743,431],[743,431],[743,431],[744,431],[744,431],[744,431],[744,431],[744,431],[745,431],[745,431],[745,431],[745,431],[745,431],[745,431],[746,431],[746,431],[746,431],[746,431],[746,431],[747,431],[747,431],[747,431],[747,431],[747,431],[747,431],[748,431],[748,431],[748,431],[748,431],[748,431],[748,431],[749,431],[749,431],[749,431],[749,431],[749,431],[750,431],[750,431],[750,431],[750,431],[750,431],[750,431],[751,431],[751,431],[751,431],[751,431],[751,431],[752,432],[752,432],[752,432],[752,432],[752,432],[752,432],[753,432],[753,432],[753,432],[753,432],[753,432],[754,433],[754,433],[754,433],[754,433],[754,433],[754,433],[755,433],[755,433],[755,433],[755,433],[755,433],[756,434],[756,434],[756,434],[756,434],[756,434],[756,434],[757,435],[758,435],[758,436],[758,437],[758,438]],
"SSD2":[[757,437],[757,437],[757,437],[757,437],[757,437],[756,438],[756,438],[756,438],[756,438],[756,438],[756,438],[755,439],[755,439],[755,439],[755,439],[755,439],[754,439],[754,439],[754,439],[754,439],[754,439],[754,439],[753,439],[753,439],[753,439],[753,439],[753,439],[752,439],[752,439],[752,439],[752,439],[752,439],[752,439],[751,439],[751,439],[751,439],[751,439],[751,439],[750,440],[750,440],[750,440],[750,440],[750,440],[750,440],[749,439],[749,439],[749,439],[749,439],[749,439],[748,439],[748,439],[748,439],[748,439],[748,439],[748,439],[747,439],[747,439],[747,439],[747,439],[747,439],[747,439],[746,439],[746,439],[746,439],[746,439],[746,439],[745,439],[745,439],[745,439],[745,439],[745,439],[745,439],[744,438],[744,438],[744,438],[744,438],[744,438],[743,437],[743,437],[743,437],[743,437],[743,437],[743,437],[742,437],[742,437],[742,437],[742,437],[742,437],[741,436],[741,436],[741,436],[741,436],[741,436],[741,436],[740,435],[740,435],[740,435],[740,435],[740,435],[740,435]],
// SYR -> Turkey [770,315], Lebanon [766,337], Jordan [769,349], Western Europe (Germany [675,264], France [653,284], UK [636,248], Hungary [709,282])
"SYR": [[778,336],[777,335],[776,335],[776,335],[774,334],[774,334],[774,334],[774,334],[774,334],[773,333],[773,333],[773,333],[773,333],[773,333],[772,332],[772,332],[772,332],[772,332],[772,332],[771,331],[771,331],[771,331],[771,331],[770,330],[770,330],[770,330],[770,330],[770,330],[770,329],[770,329],[770,329],[770,329],[770,329],[769,328],[769,328],[769,328],[769,328],[769,328],[769,327],[769,327],[769,327],[769,327],[768,326],[768,326],[768,326],[768,326],[768,326],[768,325],[768,325],[768,325],[768,325],[768,325],[768,324],[768,324],[768,324],[768,324],[768,324],[768,323],[768,323],[768,323],[768,323],[768,322],[768,322],[768,322],[768,322],[768,322],[768,321],[768,321],[768,321],[768,321],[768,321],[768,320],[768,320],[768,320],[768,320],[768,320],[768,319],[768,319],[768,319],[768,319],[768,318],[768,318],[768,318],[768,318],[768,318],[768,317],[768,317],[768,317],[768,317],[768,317],[768,316],[768,316],[768,316],[768,316],[768,316],[769,315],[769,315],[769,315],[769,315],[769,315]],
// Lebanon [766,337]
"SYR2":[[778,336],[777,335],[777,335],[777,335],[777,335],[777,335],[777,335],[777,335],[776,336],[776,336],[776,336],[776,336],[776,336],[776,336],[776,336],[776,336],[775,337],[775,337],[775,337],[775,337],[775,337],[775,337],[775,337],[775,337],[775,337],[774,337],[774,337],[774,337],[774,337],[774,337],[774,337],[774,337],[774,337],[773,337],[773,337],[773,337],[773,337],[773,337],[773,337],[773,337],[773,337],[772,337],[772,337],[772,337],[772,337],[772,337],[772,337],[772,337],[772,337],[772,337],[771,338],[771,338],[771,338],[771,338],[771,338],[771,338],[771,338],[771,338],[770,337],[770,337],[770,337],[770,337],[770,337],[770,337],[770,337],[770,337],[769,337],[769,337],[769,337],[769,337],[769,337],[769,337],[769,337],[769,337],[769,337],[768,337],[768,337],[768,337],[768,337],[768,337],[768,337],[768,337],[768,337],[767,337],[767,337],[767,337],[767,337],[767,337],[767,337],[767,337],[767,337],[766,336],[766,336],[766,336],[766,336],[766,336],[766,336],[766,336],[766,336],[766,336]],
//Jordan [769,349]
"SYR3":[[778,336],[777,336],[777,336],[777,336],[777,336],[777,336],[777,336],[777,336],[777,337],[777,337],[777,337],[777,337],[777,337],[777,337],[777,337],[777,337],[778,338],[778,338],[778,338],[778,338],[778,338],[778,338],[778,338],[778,338],[777,339],[777,339],[777,339],[777,339],[777,339],[777,339],[777,339],[777,340],[777,340],[777,340],[777,340],[777,340],[777,340],[777,340],[777,340],[777,341],[777,341],[777,341],[777,341],[777,341],[777,341],[777,341],[777,341],[777,342],[777,342],[777,342],[777,342],[777,342],[777,342],[777,342],[776,343],[776,343],[776,343],[776,343],[776,343],[776,343],[776,343],[776,343],[776,344],[776,344],[776,344],[776,344],[776,344],[776,344],[776,344],[776,344],[775,345],[775,345],[775,345],[775,345],[775,345],[775,345],[775,345],[774,346],[774,346],[774,346],[774,346],[774,346],[774,346],[774,346],[774,346],[773,347],[773,347],[773,347],[773,347],[773,347],[773,347],[773,347],[773,347],[771,348],[771,348],[771,348],[771,348],[771,348],[770,348],[769,348]],
// DEU [675,264]
"SYR4":[[778,336],[775,336],[774,336],[773,336],[772,336],[771,336],[770,336],[769,336],[768,336],[767,336],[766,336],[765,336],[764,336],[763,336],[762,337],[761,336],[760,336],[759,336],[758,336],[757,336],[756,336],[755,336],[754,336],[753,336],[752,336],[751,336],[750,336],[749,336],[748,335],[747,335],[746,335],[745,335],[744,335],[742,334],[741,334],[740,334],[739,333],[738,333],[737,333],[736,333],[735,332],[734,332],[733,332],[732,331],[731,331],[730,331],[729,330],[728,330],[727,329],[726,329],[725,328],[724,328],[723,328],[722,327],[721,326],[720,326],[719,325],[718,325],[717,324],[716,324],[715,323],[714,322],[713,322],[712,321],[711,320],[710,320],[708,318],[707,317],[706,317],[705,316],[704,315],[703,314],[702,313],[701,312],[700,311],[699,310],[698,309],[697,308],[696,307],[695,306],[694,305],[693,304],[692,302],[691,301],[690,300],[689,298],[688,297],[687,295],[686,294],[685,292],[684,290],[683,288],[682,287],[681,284],[680,282],[679,280],[678,277],[677,274],[676,270],[675,266]],
// France [653,284]
"SYR5":[[778,336],[776,336],[774,337],[773,337],[771,338],[770,338],[769,338],[768,339],[766,339],[765,339],[764,340],[763,340],[761,340],[760,341],[759,341],[758,341],[756,341],[755,341],[754,342],[753,342],[751,342],[750,342],[749,342],[748,342],[746,342],[745,342],[744,342],[743,342],[741,343],[740,342],[739,342],[738,342],[736,342],[735,342],[734,342],[733,342],[731,342],[730,342],[729,342],[728,342],[726,341],[725,341],[724,341],[723,341],[721,340],[720,340],[719,340],[718,340],[716,339],[715,339],[714,339],[713,338],[711,338],[710,337],[709,337],[708,337],[706,336],[705,335],[704,335],[703,335],[701,334],[700,333],[699,333],[698,332],[696,331],[695,331],[694,330],[693,330],[691,328],[690,328],[689,327],[688,327],[686,325],[685,324],[684,324],[683,323],[681,321],[680,321],[679,320],[678,319],[676,317],[675,316],[674,315],[673,314],[671,312],[670,311],[669,310],[668,309],[666,306],[665,305],[664,304],[663,302],[661,300],[660,298],[659,296],[658,295],[656,291],[655,289],[654,287],[653,285]],
// UK [636,248]
"SYR6":[[778,336],[776,336],[774,336],[772,336],[770,337],[769,337],[768,337],[766,337],[765,338],[763,338],[762,338],[760,338],[759,338],[758,338],[756,338],[755,338],[753,338],[752,338],[751,338],[749,338],[748,338],[746,338],[745,338],[743,338],[742,338],[741,338],[739,338],[738,338],[736,338],[735,338],[733,337],[732,337],[731,337],[729,337],[728,336],[726,336],[725,336],[724,336],[722,335],[721,335],[719,334],[718,334],[716,333],[715,333],[714,333],[712,332],[711,332],[709,331],[708,331],[706,330],[705,330],[704,329],[702,328],[701,328],[699,327],[698,326],[697,326],[695,325],[694,324],[692,323],[691,323],[689,322],[688,321],[687,320],[685,319],[684,318],[682,317],[681,316],[680,315],[678,314],[677,313],[675,312],[674,311],[672,309],[671,308],[670,307],[668,305],[667,304],[665,302],[664,301],[662,299],[661,298],[660,297],[658,294],[657,293],[655,290],[654,289],[653,288],[651,285],[650,283],[648,280],[647,278],[645,274],[644,272],[643,270],[641,266],[640,263],[638,258],[637,254],[636,251]],
// HUN 709,282
"SYR7":[[778,336],[777,335],[776,335],[775,335],[775,335],[774,335],[773,335],[773,335],[772,335],[771,335],[771,335],[770,336],[769,335],[769,335],[768,335],[767,335],[766,335],[766,335],[765,335],[764,335],[764,335],[763,335],[762,335],[762,335],[761,335],[760,335],[760,335],[759,335],[758,334],[757,334],[757,334],[756,334],[755,334],[755,334],[754,333],[753,333],[753,333],[752,333],[751,333],[751,333],[750,332],[749,332],[749,332],[748,331],[747,331],[746,331],[746,331],[745,330],[744,330],[744,330],[743,329],[742,329],[742,329],[741,328],[740,328],[740,328],[739,327],[738,327],[737,326],[737,326],[736,325],[735,325],[735,325],[734,324],[733,323],[733,323],[732,322],[731,322],[731,322],[730,321],[729,320],[729,320],[728,319],[727,318],[726,317],[726,317],[725,316],[724,315],[724,315],[723,314],[722,313],[722,313],[721,311],[720,310],[720,310],[719,309],[718,307],[717,306],[717,306],[716,304],[715,302],[715,302],[714,300],[713,298],[713,298],[712,295],[711,293],[711,293],[710,289],[709,285]],
// Tajikistan -> neighbors
"TJK": [[893,317],[893,317],[893,317],[893,317],[892,317],[892,317],[892,317],[892,317],[892,317],[891,317],[891,317],[891,317],[891,317],[890,317],[890,317],[890,317],[890,317],[890,317],[889,317],[889,317],[889,317],[889,317],[888,317],[888,317],[888,317],[888,317],[888,317],[887,317],[887,317],[887,317],[887,317],[886,317],[886,317],[886,317],[886,317],[886,317],[885,317],[885,317],[885,317],[885,317],[884,318],[884,318],[884,318],[884,318],[884,318],[883,318],[883,318],[883,318],[883,318],[883,318],[882,319],[882,319],[882,319],[882,319],[881,319],[881,319],[881,319],[881,319],[881,319],[880,320],[880,320],[880,320],[880,320],[879,321],[879,321],[879,321],[879,321],[879,321],[878,321],[878,321],[878,321],[878,321],[877,322],[877,322],[877,322],[877,322],[877,322],[876,323],[876,323],[876,323],[876,323],[875,325],[875,325],[875,325],[875,325],[875,325],[874,326],[874,326],[874,326],[874,326],[873,328],[873,328],[873,328],[873,328],[873,328],[872,330],[872,330],[872,330],[872,330],[872,330]],
// Uganda -> Britain
"UGA": [[757,454],[746,451],[740,449],[735,447],[730,445],[726,443],[722,441],[718,439],[714,437],[711,435],[708,433],[705,431],[702,429],[699,427],[696,425],[694,423],[691,421],[689,419],[686,417],[684,415],[682,413],[679,410],[677,408],[675,406],[673,404],[671,402],[670,400],[668,398],[666,396],[665,394],[663,392],[662,390],[660,388],[659,386],[658,384],[656,382],[655,380],[654,378],[653,376],[651,374],[650,372],[649,369],[648,367],[647,365],[646,363],[645,361],[644,359],[643,357],[642,355],[641,353],[641,351],[640,349],[639,347],[638,345],[638,343],[637,341],[637,339],[636,337],[635,335],[635,333],[634,331],[634,328],[633,326],[633,324],[632,322],[632,320],[632,318],[631,316],[631,314],[631,312],[631,310],[630,308],[630,306],[630,304],[630,302],[630,300],[630,298],[630,296],[630,294],[630,292],[630,290],[630,287],[630,285],[630,283],[630,281],[630,279],[630,277],[630,275],[630,273],[631,271],[631,269],[631,267],[632,265],[632,263],[633,259],[633,257],[633,255],[634,253],[634,251],[635,249]],
// Uganda -> Canada
"UGA2": [[757,454],[747,456],[742,458],[737,459],[732,461],[727,462],[722,464],[717,465],[712,466],[707,467],[702,468],[697,469],[693,470],[688,471],[683,472],[678,473],[673,473],[668,474],[663,475],[658,475],[653,475],[648,476],[643,476],[638,476],[634,476],[629,476],[624,477],[619,476],[614,476],[609,476],[604,476],[599,476],[594,475],[589,475],[584,474],[579,474],[574,473],[570,473],[565,472],[560,471],[555,470],[550,469],[545,468],[540,467],[535,466],[530,465],[525,463],[520,462],[515,461],[511,459],[506,458],[501,456],[496,454],[491,453],[486,451],[481,449],[476,447],[471,445],[466,442],[461,440],[456,438],[451,435],[447,433],[442,430],[437,428],[432,425],[427,422],[422,419],[417,416],[412,412],[407,409],[402,406],[397,402],[392,398],[388,395],[383,391],[378,387],[373,383],[368,378],[363,374],[358,369],[353,364],[348,359],[343,354],[338,348],[333,343],[328,337],[324,332],[319,325],[314,318],[309,311],[304,304],[299,296],[294,288],[289,279],[284,270],[279,260],[274,249],[269,237],[265,227]],
// Uganda ->  India
"UGA3": [[757,453],[758,451],[760,447],[761,445],[763,441],[765,438],[766,436],[768,433],[770,431],[771,429],[773,427],[774,425],[776,423],[778,421],[779,420],[781,418],[783,416],[784,415],[786,413],[787,412],[789,410],[791,408],[792,408],[794,406],[796,405],[797,404],[799,402],[801,401],[802,400],[804,399],[805,398],[807,397],[809,396],[810,396],[812,395],[814,393],[815,393],[817,392],[818,392],[820,391],[822,390],[823,389],[825,389],[827,388],[828,388],[830,387],[831,387],[833,386],[835,385],[836,385],[838,384],[840,384],[841,384],[843,383],[845,383],[846,383],[848,382],[849,382],[851,382],[853,382],[854,381],[856,381],[858,381],[859,381],[861,381],[862,381],[864,381],[866,381],[867,381],[869,381],[871,381],[872,381],[874,381],[875,381],[877,381],[879,381],[880,381],[882,381],[884,381],[885,382],[887,382],[889,382],[890,382],[892,383],[893,383],[895,383],[897,384],[898,384],[900,384],[902,385],[903,385],[905,386],[906,386],[908,387],[910,388],[911,388],[913,389],[915,389],[916,390],[918,391]],
// North VN -> South VN
// South VN -> North VN
"VNM": [[1009,383],[1009,383],[1009,383],[1011,384],[1011,384],[1011,384],[1012,385],[1012,385],[1013,386],[1013,386],[1013,386],[1014,387],[1014,387],[1015,388],[1015,388],[1015,388],[1016,389],[1016,389],[1016,390],[1016,390],[1016,390],[1017,391],[1017,391],[1017,391],[1018,392],[1018,392],[1018,393],[1018,393],[1018,393],[1019,394],[1019,394],[1019,395],[1019,395],[1019,395],[1020,396],[1020,396],[1020,397],[1020,397],[1020,397],[1020,398],[1020,398],[1020,398],[1021,399],[1021,399],[1021,400],[1021,400],[1021,400],[1021,401],[1021,401],[1021,402],[1021,402],[1021,402],[1021,403],[1021,403],[1021,404],[1021,404],[1021,404],[1021,405],[1021,405],[1022,406],[1022,406],[1022,406],[1021,407],[1021,407],[1021,407],[1021,408],[1021,408],[1021,409],[1021,409],[1021,409],[1021,410],[1021,410],[1021,411],[1021,411],[1021,411],[1021,412],[1021,412],[1021,413],[1021,413],[1021,413],[1020,414],[1020,414],[1020,414],[1020,415],[1020,415],[1020,416],[1020,416],[1020,416],[1019,417],[1019,417],[1019,418],[1019,418],[1019,418],[1018,419],[1018,419],[1018,420],[1018,420],[1018,420],[1017,421],[1017,421]], 
"VNM2":[[1017,420],[1016,420],[1015,419],[1014,419],[1014,419],[1012,418],[1012,418],[1011,417],[1011,417],[1011,417],[1010,416],[1010,416],[1010,416],[1010,415],[1010,415],[1009,414],[1009,414],[1009,414],[1008,413],[1008,413],[1008,413],[1007,412],[1007,412],[1007,411],[1007,411],[1007,411],[1006,410],[1006,410],[1006,409],[1006,409],[1006,409],[1005,408],[1005,408],[1005,408],[1005,407],[1005,407],[1005,406],[1005,406],[1005,406],[1004,405],[1004,405],[1004,405],[1004,404],[1004,404],[1004,403],[1004,403],[1004,403],[1004,402],[1004,402],[1004,401],[1004,401],[1004,401],[1004,400],[1004,400],[1004,400],[1004,399],[1004,399],[1004,398],[1004,398],[1004,398],[1004,397],[1004,397],[1004,397],[1004,396],[1004,396],[1004,395],[1004,395],[1004,395],[1004,394],[1004,394],[1004,394],[1004,393],[1004,393],[1004,392],[1004,392],[1004,392],[1004,391],[1004,391],[1005,390],[1005,390],[1005,390],[1005,389],[1005,389],[1005,389],[1005,388],[1005,388],[1006,387],[1006,387],[1006,387],[1006,386],[1006,386],[1006,386],[1007,385],[1007,385],[1007,384],[1007,384],[1007,384],[1008,383],[1008,383],[1009,383]],
// Rhodesia/Zimbabwe -> Mozambique, 
"ZWE": [[749,528],[749,527],[749,527],[749,527],[749,527],[750,527],[750,527],[750,527],[750,527],[751,527],[751,527],[751,527],[751,527],[752,527],[752,527],[752,527],[752,527],[753,527],[753,527],[753,527],[753,527],[754,528],[754,528],[754,528],[754,528],[755,527],[755,527],[755,527],[755,527],[755,527],[756,527],[756,527],[756,527],[756,527],[757,527],[757,527],[757,527],[757,527],[758,527],[758,527],[758,527],[758,527],[759,527],[759,527],[759,527],[759,527],[760,527],[760,527],[760,527],[760,527],[761,526],[761,526],[761,526],[761,526],[761,526],[762,526],[762,526],[762,526],[762,526],[763,525],[763,525],[763,525],[763,525],[764,525],[764,525],[764,525],[764,525],[765,524],[765,524],[765,524],[765,524],[766,523],[766,523],[766,523],[766,523],[767,522],[767,522],[767,522],[767,522],[767,522],[768,521],[768,521],[768,521],[768,521],[769,520],[769,520],[769,520],[769,520],[770,519],[770,519],[770,519],[770,519],[771,517],[771,517],[771,517],[771,517],[772,515],[772,515],[772,515],[772,515]],
// -> Botswana [724,538], 
"ZWE2": [[749,528],[748,528],[748,528],[748,528],[747,530],[747,530],[747,530],[747,530],[746,531],[746,531],[746,531],[746,531],[745,532],[745,532],[745,532],[745,532],[744,533],[744,533],[744,533],[744,533],[743,534],[743,534],[743,534],[743,534],[742,535],[742,535],[742,535],[742,535],[741,536],[741,536],[741,536],[741,536],[740,536],[740,536],[740,536],[740,536],[739,537],[739,537],[739,537],[739,537],[738,537],[738,537],[738,537],[738,537],[737,538],[737,538],[737,538],[737,538],[736,538],[736,538],[736,538],[736,538],[735,538],[735,538],[735,538],[735,538],[734,538],[734,538],[734,538],[734,538],[733,538],[733,538],[733,538],[733,538],[732,538],[732,538],[732,538],[732,538],[731,539],[731,539],[731,539],[731,539],[730,538],[730,538],[730,538],[730,538],[729,538],[729,538],[729,538],[729,538],[728,538],[728,538],[728,538],[728,538],[727,538],[727,538],[727,538],[727,538],[726,538],[726,538],[726,538],[726,538],[725,538],[725,538],[725,538],[725,538],[724,537],[724,537],[724,537],[724,538]],
// -> Zambia [736,509]
"ZWE3": [[749,528],[748,527],[747,527],[746,527],[745,527],[743,526],[743,526],[743,526],[743,526],[743,526],[741,525],[741,525],[741,525],[741,525],[741,525],[740,524],[740,524],[740,524],[740,524],[740,524],[740,524],[739,523],[739,523],[739,523],[739,523],[739,523],[738,522],[738,522],[738,522],[738,522],[738,522],[737,521],[737,521],[737,521],[737,521],[737,521],[737,520],[737,520],[737,520],[737,520],[737,520],[737,520],[736,519],[736,519],[736,519],[736,519],[736,519],[736,518],[736,518],[736,518],[736,518],[736,518],[735,517],[735,517],[735,517],[735,517],[735,517],[735,516],[735,516],[735,516],[735,516],[735,516],[735,516],[735,515],[735,515],[735,515],[735,515],[735,515],[735,514],[735,514],[735,514],[735,514],[735,514],[735,513],[735,513],[735,513],[735,513],[735,513],[735,512],[735,512],[735,512],[735,512],[735,512],[735,512],[735,511],[735,511],[735,511],[735,511],[735,511],[735,510],[735,510],[735,510],[735,510],[735,510],[735,509],[735,509],[735,509],[735,509],[736,509],[736,509]]
};

var countryarr = [
[" ", " "], // hack around issue with 1st item not showing
["AFG","0,255,10"], 
["ARM","138,43,226"], 
["AZE","255,255,255"],
["BIH", "135,206,235"],
["CHN","255,255,255"], 
["COL","100,255,255"],
["CZE","255,0,255"], 
["DZA","135,206,235"], 
["DZA2","135,206,235"], 
["ERI","255,255,0"], 
["ETH","255,0,255"], 
["GEO","0,0,255"], 
["GTM","255,125,02"], 
["GTM2","255,125,0"], 
["HRV","255,0,0"], 
["HUN","255,192,203"], 
["IRQ","218,165,32"], 
["IRQ2","218,165,32"], 
["ISR","255,0,255"], 
["IND","70,130,180"], 
["IDN","255,100,0"], 
["KHM","100,0,255"], 
["LAO","255,0,255"], 
["MMR","0,200,200"], 
["MOZ","255,192,203"], 
["NIC","255,125,0"], 
["NGA","255,125,0"], 
["PAK","50,100,180"], 
["PSE","255,125,0"], 
["POL","255,0,255"], 
["RUS","255,0,255"], 
["RWA","138,43,226"], 
["RWA2","138,43,226"], 
["RWA3","138,43,226"], 
["SLV","255,125,0"], 
["SRB","0,255,0"],
["SSD","255,255,0"], 
["SSD2","255,255,0"], 
["SYR","0,255,0"],
["SYR2","0,255,0"],
["SYR3","0,255,0"],
["SYR4","0,255,0"],
["SYR5","0,255,0"],
["SYR6","0,255,0"],
["SYR7","0,255,0"],
["TJK","255,255,0"], 
["UGA","255,255,255"], 
["UGA2","255,255,255"], 
["UGA3","255,255,255"], 
["VNM","255,255,0"], 
["VNM2","255,255,0"], 
["ZWE","70,130,180"], 
["ZWE2","70,130,180"], 
["ZWE3","70,130,180"]
];

function getAllCountries() {
	var countrySet = new Set()
	for (var i in countryarr) {
		countrySet.add(countryarr[i][0]);
	}
	return countrySet;
}
allCountries = getAllCountries();
console.log(allCountries)

var year_start = 1940;
var year_end = 2015;

var descript = [
[1,2,3,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,39300000,"1940 to 1949"],
[10,10,10,1,2,3,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,2785000,"1950 to 1959"],
[10,10,10,10,10,10,1,2,3,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,5150000,"1960 to 1969"],
[10,10,10,10,10,10,10,10,10,1,2,3,10,10,10,10,10,10,10,10,10,10,10,10,24125000,"1970 to 1979"],
[10,10,10,10,10,10,10,10,10,10,10,10,1,2,3,10,10,10,10,10,10,10,10,10,3470000,"1980 to 1989"],
[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1,2,3,10,10,10,10,10,10,11160000,"1990 to 1999"],
[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1,2,3,10,10,10,7741040,"2000 to 2009"],
[10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1,2,3,15121000,"2010 to 2015"]
];

//this object map decades to countries and their migration size
var decadeCountries = [
// 1940 to 1949
[["RUS",1000000], ["POL", 1500000], ["CZE",1500000], ["IND",7000000], ["PAK",7000000], ["PSE", 1000000]],
// 50s
[["CHN",385000], ["VNM", 1000000,], ["HUN", 700000 ]],
// 60s
[["DZA",1200000 ],["DZA2",1200000], ["RWA", 1500000], ["RWA2", 150000], ["RWA3", 150000], ["VNM2",2700000], ["ISR",3000000 ], ["NGA", 2000000]],
// 70s
[["PAK",10000000],["UGA", 80000],["UGA2", 80000],["UGA3", 80000],["LAO",120000],["KHM", 375000],["MOZ", 5700000],["MMR", 250000], ["ERI", 500000],["ETH",620000], ["AFG",6300000],["ZWE",410000],["ZWE2",210000],["ZWE3",210000]],
// 80s
[["NIC",500000],["SLV", 500000], ["GTM",500000], ["GTM2",500000], ["SRB",350000],["GEO",320000]],
//90s
[["ARM",800000],["AZE",800000], ["SRB",1150000],["GEO",320000],["HRV",550000 ], ["RUS",650000 ],["IRQ", 1820000 ],["IRQ2", 1820000 ],["TJK",600000],["MMR",250000],["RWA",3500000],["RWA2",3500000],["RWA3",3500000],["IDN",540000], ["BIH",2500000] ],
// 2000s
[["COL",5841040 ],["IRQ",1900000],["IRQ2",1900000]],
// 2010s
[["COL",5841040 ],["IRQ",1900000],["IRQ2",1900000], ["MMR",891000], ["SYR",500000], ["SYR2",500000], ["SYR3",500000], ["SYR4",1000000], ["SYR5",700000], ["SYR6",400000], ["SYR7",800000], ["SSD", 1100000], ["SSD2", 1100000]]
];

function init2d(x,y, value) {
	var arr2D = new Array(x).fill(new Array(y));
	for (var i in arr2D) {
		arr2D[i] = new Array(y).fill(value);
	}
    return arr2D;
}

// we need 24 rows to handle exception when calculating numdecade line 813
var ctydist = init2d(24,71,0)

function findIndex(countryCode) {
	for (var i in countryarr) {
		if (countryCode == countryarr[i][0]) {
			return i;
		}
	}
	return -1;
}
// given a decade index, find set of countries
function getCountriesForDecade(decadeIdx) {
	result = new Set();
	for (var i in decadeCountries[decadeIdx]) {
		result.add(decadeCountries[decadeIdx][i][0])
	}
	return result;
}

function findColor(countryCode) {
	for (var i in countryarr) {
		if (countryCode == countryarr[i][0].slice(0,3)) {
			console.log(countryarr[i][0]);
			return ("rgb(" + countryarr[i][1] + ")");
		}
	}
	return "rgb(0,0,0)";
}

for (var i in decadeCountries) {
	for (var j in decadeCountries[i]) {
		// find index for the country
		index = findIndex(decadeCountries[i][j][0]);
		//console.log(i,index,ctydist[i][index]);
		// get the number of migrants
		ctydist[i][index] = decadeCountries[i][j][1] / 10000;
	}
}

var ctytotal = [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000];

/*
var ctydist = [
// 1940- 1950: RUS (index=29), POL(27), CZE(4). They current have values 10 now, but should be changed to whatever suitable values
[0, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
//[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.],
[ 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100,  100, 100,  100,  100,  100,  100,  100,  0.]
// [0, 0, 0.0028, 0, 0, 0.0173, 0, 0.7694, 0.5753, 0.0017, 5.1617, 0.043, 0.1105, 0, 0, 0.0019, 0.0252, 0, 0.0086, 0.2866, 0.3148, 2.6336, 0, 0.0003, 0, 0.0009, 0, 0, 0, 0, 0, 0, 0, 0, 0.0019, 0, 0.2297, 0.3835, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0001, 0, 0, 0.0002, 0, 0, 0.0018, 0.0003, 0.0003],
// [0, 0, 0.002, 0, 0, 0.0927, 0, 3.933, 12.4726, 0.0049, 17.0672, 0.2225, 0.1377, 0, 0, 0.0366, 0.0896, 0, 0.028, 0.2016, 0.443, 7.435, 0, 0.0008, 0, 0.0038, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008, 0, 1.1875, 0.7187, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008, 0.0004, 0, 0.0001, 0, 0, 0.0054, 0.004, 0.0001],
// [0, 0, 0.3996, 0, 0, 0.0671, 0, 7.53, 38.5434, 0.0017, 65.6145, 0.1476, 0.7624, 0, 0, 0.0105, 0.0359, 0, 0.052, 0.1917, 0.4819, 21.8572, 0, 0.0032, 0, 0.0033, 0.0007, 0, 0, 0, 0, 0, 0, 0, 0.0045, 0, 3.4285, 0.3069, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0005, 0.0001, 0, 0.0002, 0, 0.0001, 0.0061, 0.0079, 0.0004],
// [0, 0, 0.5765, 0, 0, 0.3227, 0, 8.1778, 97.6072, 0.0032, 102.9486, 0.8643, 1.1122, 0, 0, 0.1087, 0.4218, 0, 0.0423, 0.8803, 2.4423, 44.5322, 0, 3.5933, 0, 0.0042, 0, 0, 0, 0, 0, 0, 0, 0, 0.0094, 0, 6.4171, 0.3446, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0005, 0, 0.0007, 0, 0, 0.0104, 0.0002, 0.0004, 0.0092, 0.0014, 0.0011],
// [0.27, 0.0483, 0.5785, 0, 0, 1.3553, 0.0003, 3.5938, 72.3734, 0.0051, 42.7419, 0.9853, 0.8387, 0, 0, 0.1886, 0.4741, 0, 0.1667, 0.697, 2.1124, 53.2956, 0, 5.4028, 0, 0.005, 0.0004, 0, 0.0138, 0, 0, 0, 0.0002, 0, 0.0129, 0, 11.7975, 0.1957, 0.342, 0, 0.0078, 0.0061, 0.0009, 0.0002, 0, 0.0001, 0, 0, 0, 0.0007, 0, 0.0032, 0.0025, 0.0002, 0, 0.0041, 0, 0.0035, 0, 0, 0.0036, 0.0008, 0, 0.0043, 0, 0.0079, 0.0096, 0.0006, 0.0005, 0.0328, 0.001, 0.0057],
// [5.4529, 0.5598, 0.6991, 0, 0, 2.9278, 0.0286, 7.1901, 75.1769, 0.0209, 42.2264, 4.6296, 1.4267, 8.8644, 9.0179, 1.1016, 1.399, 0, 3.4977, 0.5571, 2.5212, 57.8447, 0, 13.3139, 0, 0.0166, 0.0017, 0, 0.0193, 0, 0, 0.0004, 0.0007, 0, 0.0382, 0, 32.3974, 0.5133, 0.8705, 0, 0.0149, 0.0257, 0.0026, 0.0004, 0.0003, 0.001, 0.0011, 0.0001, 0, 0.0058, 0.0005, 0.0219, 0.0092, 0.0196, 0.0007, 0.0095, 0.0002, 0.0127, 0, 0.0022, 0.019, 0.0029, 0, 0.0052, 0.0015, 0.0048, 0.8933, 0.0039, 0.0122, 0.0297, 0.0626, 0.0163],
// [20.4805, 10.9982, 1.8738, 0, 0, 8.5342, 0.9617, 4.8193, 144.5181, 0.1807, 67.4061, 26.766, 5.2715, 18.5111, 40.133, 4.291, 1.5189, 0.5842, 17.3081, 0.3999, 8.1151, 81.09, 0, 6.5797, 0, 0.0247, 0.0018, 0, 0.1583, 0, 0, 0.0001, 0.014, 0, 0.2478, 0, 49.2508, 0.2405, 2.0134, 0, 0.0124, 0.0355, 0.008, 0.0001, 0, 0.0003, 0.0004, 0.0001, 0, 0.0064, 0, 0.0199, 0.0044, 0.121, 0.0014, 0.0068, 0, 0.0025, 0, 0.0004, 0.0248, 0.0145, 0, 0.0021, 0.0012, 0.0023, 0.725, 0.0021, 0.007, 0.0567, 0.107, 0.0888],
// [26.8218, 20.335, 1.9642, 0.0052, 0, 5.6671, 3.6719, 3.5616, 57.9072, 1.2732, 40.571, 60.3761, 2.9349, 9.681, 23.7248, 10.7793, 2.5874, 0.6808, 41.3382, 0.9189, 3.702, 32.8759, 0, 1.5268, 0, 0.0102, 0.0026, 0, 1.3998, 0, 0, 0.0019, 0, 0, 2.751, 0, 0.2668, 0.0734, 2.3669, 0, 0.0101, 0.0223, 0.0025, 0.0004, 0.0007, 0.0009, 0.0004, 0.0003, 0, 0.0036, 0, 0.0092, 0.0066, 0.0607, 0.0033, 0.0027, 0, 0.0079, 0, 0.0144, 0, 0.0051, 0, 0.0009, 0.0009, 0.0009, 0.3098, 0.0012, 0.0169, 0.0354, 0.0145, 0.4381],
// [53.2416, 68.5567, 3.7429, 3.4651, 0, 6.1227, 0, 6.7735, 32.8722, 14.5402, 34.494, 193.0475, 4.2463, 18.2542, 24.4439, 0, 6.5154, 5.7322, 150.1301, 2.4818, 3.2541, 46.9518, 0, 1.9884, 0, 0.3026, 0, 0, 13.9712, 0, 0, 0.0605, 0, 0, 12.7999, 0, 12.3067, 3.1188, 0, 0, 0, 0, 0.0583, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.1191, 0, 0.0486, 0.6326, 0.0514, 0.9215],
// [58.9174, 56.5553, 3.2574, 2.718, 0, 4.583, 0, 6.0335, 17.4227, 19.8108, 16.6445, 122.9916, 4.6065, 7.9488, 11.2957, 0, 8.2489, 1.3566, 110.6998, 5.3262, 2.2839, 37.1878, 0, 2.0916, 0, 0.3478, 0, 0, 7.7125, 0, 0, 0, 0, 0, 16.0717, 0, 70.8715, 18.5334, 0, 0, 0, 0, 0.004, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.128, 0, 0.1059, 0.8867, 0.6527, 0.75],
// [3.1392, 2.9499, 2.1511, 0.2824, 10.1182, 3.4406, 1.6922, 5.4842, 38.6634, 6.0774, 20.1644, 52.8133, 2.9397, 7.0327, 10.0002, 22.442, 4.4829, 6.781, 6.1604, 4.7109, 3.1772, 34.2762, 4.9215, 3.0648, 0, 0.2076, 0.0208, 0, 4.2057, 0, 0, 0, 0.5307, 0, 4.0374, 0, 94.9286, 49.8945, 1.2769, 0, 0, 0, 0.0285, 0, 0, 0, 0, 0, 0, 0, 0, 0.4627, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1063, 0, 0, 0, 0, 0.8404, 0.0935, 0.0521, 0.5299, 2.133, 0.607],
// [0.6678, 0.7224, 0.4013, 0.1062, 1.7757, 0.347, 0.2438, 1.3761, 11.7736, 1.0599, 2.8195, 8.5053, 0.7791, 0.6901, 0.6551, 2.646, 0.3518, 0.5264, 0.2473, 0.3669, 0.599, 6.1813, 0.692, 0.5874, 0, 0.0554, 0.0198, 0, 0.2683, 0, 0, 0.0457, 0.2188, 0, 0.1314, 0, 16.2703, 3.2709, 1.0641, 0.1165, 0.0207, 0, 0.0193, 0.058, 0.0712, 0.0632, 0.0809, 0.0564, 0.1774, 0.1397, 0.0077, 0.1468, 0.0568, 0.1278, 0.032, 0.0193, 0.0036, 0.046, 0.0033, 0.0153, 0.136, 0.0781, 0.001, 0.0035, 0.011, 0.0312, 0.226, 0.079, 0.019, 0.0872, 0.9068, 0.6024],
// [0.8496, 0.5181, 1.2473, 0.0449, 0.8475, 0.4549, 0.223, 3.6954, 11.9403, 0.8605, 1.5701, 5.0509, 1.3877, 0.8326, 0.9, 0.7774, 0.6765, 0.1254, 0.0605, 0.2774, 0.9904, 13.1794, 0.2039, 1.6072, 0, 0.1692, 0.1144, 0.0098, 0.1557, 0.0003, 0.0083, 0.4099, 0.1179, 0, 0.0754, 0, 16.0911, 5.6158, 2.5976, 0.4802, 0.0823, 0, 0.0433, 0.1965, 0.4885, 0.1303, 0.1874, 0.4393, 0.5282, 0.3108, 0.0893, 0.3653, 0.132, 0.3454, 0.2207, 0.0596, 0.0085, 0.1273, 0.013, 0.0754, 0.2182, 0.1613, 0.0028, 0.0037, 0.1463, 0.1022, 1.1201, 0.2351, 0.071, 0.2557, 0.5387, 0.7851],
// [8.1354, 3.1661, 1.8885, 0.0097, 0.1624, 1.0918, 0.4923, 5.0113, 57.6905, 4.5153, 4.7189, 18.9061, 4.6703, 2.2813, 2.1418, 0.6498, 1.3928, 0.0914, 0.0453, 0.688, 1.7577, 19.5709, 0.6966, 0.8836, 1.3781, 0.1922, 0.3195, 2.1376, 4.1968, 0.4919, 0.4845, 1.7245, 0.1091, 0.0721, 0.298, 0.029, 35.3169, 27.3847, 7.3221, 1.0219, 0.3787, 0.7397, 0.1133, 0.4044, 0.5094, 0.4197, 0.532, 0.7812, 1.2601, 1.6346, 0.2759, 1.1547, 0.4669, 1.5567, 0.8574, 0.1131, 0.0576, 0.598, 0.0299, 0.1026, 0.9927, 0.1996, 0.0302, 0.0289, 0.3293, 0.2278, 0.8275, 0.1799, 0.1245, 0.4858, 0.7231, 1.2675],
// [1.7571, 1.0019, 0.9647, 0.0598, 0.2758, 0.9797, 0.431, 4.6975, 20.9616, 7.4173, 3.7788, 20.0111, 3.7918, 1.7371, 1.8779, 5.5773, 7.0568, 0.2339, 0.2329, 4.0793, 1.9193, 22.0213, 1.799, 1.406, 6.7047, 1.8638, 0.9059, 3.0911, 4.0956, 0.923, 2.7048, 7.066, 0.2432, 1.5657, 0.9464, 0.2949, 43.3128, 44.1824, 20.203, 8.3552, 2.8992, 6.2218, 0.4185, 1.7975, 1.4405, 1.4357, 1.5087, 1.0383, 2.2177, 4.9384, 0.6205, 2.9238, 1.2384, 6.8371, 3.4107, 0.4546, 0.1249, 1.9783, 0.0612, 0.4089, 2.0758, 0.5581, 0.0804, 0.0841, 0.288, 0.436, 1.4986, 0.3775, 0.4898, 0.9314, 0.6814, 4.0452],
// [1.4239, 0.6148, 0.5413, 0.1011, 0.5654, 0.4405, 0.2829, 2.7018, 7.7142, 10.237, 1.1461, 15.0031, 1.0373, 0.3927, 0.6371, 3.3699, 10.4754, 1.0774, 2.8132, 4.1718, 0.8536, 13.3218, 3.1862, 1.7627, 11.735, 14.8018, 3.3763, 3.6306, 5.2812, 2.5541, 24.1192, 33.7726, 0.8086, 8.3155, 1.2209, 12.1716, 17.9267, 62.1218, 25.6497, 13.9249, 5.5166, 13.0226, 0.6747, 1.2405, 2.9428, 2.3837, 1.5653, 1.0911, 2.1395, 3.0303, 0.5635, 1.86, 1.5032, 7.1265, 4.7464, 3.8278, 0.1486, 2.5311, 0.0714, 0.8416, 1.1007, 2.3543, 0.2588, 0.2391, 0.1967, 1.0002, 1.8708, 0.5018, 1.6257, 3.0914, 0.5242, 17.1025],
// [1.5374, 0.5063, 0.7028, 0.1124, 0.5678, 0.4847, 0.2569, 3.2894, 8.5752, 3.7729, 2.221, 5.5562, 1.1234, 0.3835, 1.0106, 6.3483, 4.2685, 2.4753, 3.3311, 2.2783, 0.8316, 15.3644, 1.6267, 17.0897, 11.2132, 23.1649, 9.8141, 4.3669, 4.415, 2.8928, 32.2708, 50.2056, 1.4534, 11.9051, 1.9208, 20.0632, 15.6313, 100.9586, 13.2552, 22.1552, 12.1406, 19.3874, 1.4964, 2.5017, 13.7418, 5.8847, 3.9071, 3.1102, 3.2957, 2.3442, 0.9798, 2.2944, 1.9749, 10.5494, 4.8015, 8.5886, 0.3518, 4.9958, 0.1357, 0.7235, 2.2405, 2.6744, 1.2927, 0.642, 0.3471, 1.5505, 1.6901, 0.6129, 1.8402, 7.692, 0.3447, 48.3601],
// [1.8234, 0.9295, 0.7077, 1.6948, 0.897, 0.6189, 0.397, 3.6552, 9.2207, 2.5403, 6.5384, 7.5992, 1.3345, 0.5211, 1.2614, 17.2249, 2.5497, 4.8136, 43.3427, 1.8443, 1.1768, 15.6182, 5.7039, 34.2058, 11.6894, 35.2528, 7.6899, 4.134, 6.6582, 4.2755, 17.977, 53.4338, 2.2906, 13.2647, 3.8687, 27.5379, 19.4788, 275.7418, 15.9037, 35.9818, 17.7446, 17.7143, 1.26, 1.7054, 27.3017, 12.6043, 7.288, 8.0446, 2.8149, 3.0065, 1.8111, 5.0744, 1.82, 13.7985, 8.1358, 7.4407, 0.6082, 11.0117, 0.2285, 0.6062, 3.518, 4.4604, 4.0097, 1.3587, 1.5768, 2.1964, 2.4288, 0.86, 2.3912, 21.039, 2.9087, 63.7116],
// [2.1151, 1.2778, 0.8157, 4.0003, 1.8691, 0.6049, 0.397, 4.5637, 12.2373, 1.6841, 1.5642, 2.8329, 1.7351, 0.4599, 1.4783, 11.7921, 1.1479, 5.2154, 16.7152, 1.7695, 1.2173, 17.1979, 13.1831, 59.1711, 5.7583, 59.0464, 7.6755, 5.4081, 8.4552, 5.355, 20.9758, 54.5463, 3.0807, 9.2657, 4.8394, 28.9616, 23.6349, 170.4166, 27.1742, 29.1492, 20.3827, 17.2523, 0.9682, 2.1571, 25.1237, 15.6992, 6.3513, 7.0015, 1.812, 4.7955, 2.1921, 11.5404, 1.9792, 23.657, 10.7977, 7.0373, 0.4623, 13.7614, 0.2363, 0.9827, 8.2087, 8.1564, 8.7207, 2.3316, 4.0844, 3.2221, 3.2728, 1.2495, 2.057, 49.4582, 29.0871, 74.5444],
// [0.3319, 0.1006, 0.0732, 0.2465, 0.151, 0.0545, 0.0414, 0.4339, 0.7929, 0.0966, 0.161, 0.2956, 0.152, 0.0363, 0.1299, 0.7391, 0.0759, 0.3735, 0.7502, 0.204, 0.0868, 1.4781, 0.4772, 6.7634, 0.3263, 6.6185, 0.9078, 0.5172, 0.71, 0.9327, 2.2022, 5.6399, 0.7424, 0.6785, 0.7435, 3.0065, 1.9491, 13.8717, 3.3372, 5.389, 2.2336, 1.9439, 0.0997, 0.2306, 1.8547, 1.0263, 0.6381, 0.3476, 0.1627, 0.4312, 0.2211, 1.2057, 0.194, 2.1861, 1.1463, 0.6441, 0.0449, 1.4063, 0.0202, 0.1286, 0.9497, 0.9822, 1.3853, 0.2924, 0.4847, 0.2705, 0.3077, 0.1046, 0.1823, 6.4095, 2.2608, 11.232],
// [0.3654, 0.1049, 0.07, 0.2549, 0.1374, 0.0473, 0.0398, 0.3967, 0.7072, 0.1196, 0.1533, 0.267, 0.1258, 0.0405, 0.1125, 0.6634, 0.0878, 0.3679, 0.8548, 0.2319, 0.0861, 1.3443, 0.4611, 8.3603, 0.3149, 6.6331, 0.9015, 0.4389, 0.6751, 0.8211, 2.2748, 5.5251, 0.7983, 0.6206, 0.904, 3.3486, 1.9506, 14.2823, 3.6261, 4.6036, 2.1802, 1.9298, 0.0933, 0.223, 1.8477, 1.0795, 0.6053, 0.3314, 0.1447, 0.4335, 0.2113, 1.1643, 0.1854, 2.213, 1.1068, 0.6288, 0.0501, 1.3836, 0.0167, 0.1521, 0.9229, 0.9096, 1.3985, 0.3117, 0.4249, 0.2754, 0.3062, 0.1006, 0.1757, 6.4228, 2.0316, 12.2417],
// [0.2199, 0.1009, 0.0698, 0.2322, 0.1316, 0.0492, 0.0373, 0.4201, 0.6732, 0.1264, 0.1694, 0.2946, 0.1294, 0.0314, 0.1127, 0.6024, 0.0837, 0.3477, 1.0114, 0.2316, 0.0916, 1.3938, 0.4488, 7.8184, 0.2642, 6.332, 0.8955, 0.464, 0.6581, 0.7014, 2.0802, 5.5441, 0.6674, 0.5295, 0.7362, 2.7578, 2.0138, 14.5326, 3.2551, 4.1535, 2.2446, 2.03, 0.0875, 0.2152, 1.5874, 0.9857, 0.6773, 0.2943, 0.1363, 0.4218, 0.192, 1.1248, 0.1628, 2.0272, 0.9284, 0.5282, 0.0454, 1.2414, 0.0216, 0.1348, 0.9464, 1.0172, 1.54, 0.3451, 0.3534, 0.296, 0.3146, 0.098, 0.1447, 6.8168, 1.6865, 12.2],
// [0.1053, 0.1008, 0.0803, 0.272, 0.1258, 0.0546, 0.036, 0.4668, 0.688, 0.1526, 0.1765, 0.3233, 0.1376, 0.0389, 0.1276, 0.6073, 0.0917, 0.3475, 1.0154, 0.297, 0.104, 1.5321, 0.4445, 6.841, 0.2614, 6.5506, 0.9658, 0.4555, 0.6383, 0.5949, 2.2937, 5.2955, 0.3999, 0.5336, 0.7189, 2.6578, 2.0489, 13.4198, 3.1343, 4.1487, 2.0083, 1.9052, 0.0969, 0.2232, 1.8015, 0.9829, 0.8795, 0.294, 0.1276, 0.4227, 0.2005, 1.0772, 0.1751, 2.0611, 1.0553, 0.5564, 0.0437, 1.237, 0.017, 0.1314, 0.9512, 1.0719, 1.3484, 0.3036, 0.3202, 0.2693, 0.3529, 0.1027, 0.1505, 6.1455, 1.7839, 10.7232]
];


*/


// [10.5714, 44.0888, 139.4579, 270.4326, 197.5914, 273.4942, 523.5436, 360.7466, 726.2458, 617.0442, 416.9214, 68.9088, 81.6498, 240.5394, 314.0484, 411.9751, 581.8929, 961.8763, 997.3706, 102.6454, 104.6206, 101.2583, 97.104];

var yr = year_start;

var dotstotal = ctytotal[Math.floor(yr/10)-194]/10;
var dotsactual = ctytotal[Math.floor(yr/10)-194]/10;

var countrydist = new Array(countryarr.length).fill(0);
var testarr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,0,0,0,0];

countrydist = sumarrays(countrydist,ctydist[Math.floor(yr/10)-194], yr);

var speedmult = 0.7;
var speedadjust = 0;


var opacityscale = d3.scale.sqrt().domain([0,2,30,100,300]).range([0,0,0.7,0.9,0.99]);


var width = 1500,
    height = 820;


var projection = d3.geo.miller()
    .scale(200)  //140
    .translate([width / 2, height / 2])
    .center([30.6, 13.9])
    .precision(.1);

var path = d3.geo.path()
    .projection(projection);

var usacoords = [[-96, 38]].map(projection);
var usasize = 0;
var usasizeold = 0;
var usasizeold2 = 0;
var usasizeold3 = 0;
var usasizeold4 = 0;
var usasizeold5 = 0;


var svg = d3.select("svg").append("svg")
    .attr("id","svg");




var yearlabel = svg.append("text").attr("x", 582).attr("y", 658).text("1940").style("fill","white").style("font-size","26px").style("fill","rgb(200,200,200)").attr("text-anchor","start");


var ystart = 520;
var yoffset = 24;
var yoffset2 = 36;

var xstart = 40;
var xoffset = 10;

var font1 = "15px";
var font2 = "18px";
var rankoffset = 24;

var decadelabel = svg.append("text").attr("x", xstart).attr("y", ystart).text("1940-1950").style("fill","rgb(200,200,200)").style("font-size",font2);
svg.append("text").attr("x", xstart).attr("y", ystart + yoffset2).text("Decade's Total Migration").style("fill","grey").style("font-size",font1);
var migrationlabel = svg.append("text").attr("x", xstart + xoffset).attr("y", ystart + yoffset2 + yoffset).text("24,434,322").style("fill","rgb(200,200,200)").style("font-size",font2);
svg.append("text").attr("x", xstart).attr("y", ystart + yoffset2*2 + yoffset).text("Top Events (Click Event Name to Learn More)").style("fill","grey").style("font-size",font1);

var ranklabels = svg.selectAll(".countrylabels")
   .data([["Post World War II",0, "RUS", "https://en.wikipedia.org/wiki/World_War_II_evacuation_and_expulsion"], 
          ["Partition of India and Pakistan",1, "IND", "https://en.wikipedia.org/wiki/Partition_of_India"], 
          ["Establishment of the Jewish State",2, "PSE", "https://en.wikipedia.org/wiki/Jewish_state"], 
          ["Chinese Cultural Revolution",3, "CHN", "https://en.wikipedia.org/wiki/Cultural_Revolution"], 
          ["Formation of a communist government in North Vietnam",4, "VNM", "https://en.wikipedia.org/wiki/Communism_in_Vietnam"], 
          ["Soviet suppression of a Hungarian uprising",5, "HUN", "https://en.wikipedia.org/wiki/Hungarian_Revolution_of_1956"], 
          ["Vietnam War",6, "VNM2", "https://en.wikipedia.org/wiki/Vietnam_War"], 
          ["Biafran War",7, "NGA", "https://en.wikipedia.org/wiki/Nigerian_Civil_War"], 
          ["Algerian war of independence",8, "DZA", "https://en.wikipedia.org/wiki/Algerian_War"], 
          ["Soviet invasion of Afghanistan",9, "AFG", "https://en.wikipedia.org/wiki/Soviet%E2%80%93Afghan_War"], 
          ["Civil War in Mozambique",10, "MOZ", "https://en.wikipedia.org/wiki/Mozambican_Civil_War"], 
          ["Bangaladesh War of Independence",11, "MMR", "https://en.wikipedia.org/wiki/Bangladesh_Liberation_War"], 
          ["Civil War in Central America",12, "NIC", "https://en.wikipedia.org/wiki/Salvadoran_Civil_War"], 
          ["Serbian revocation of Kosovo's independent status",13, "SRB", "https://en.wikipedia.org/wiki/Anti-bureaucratic_revolution"], 
          ["Secessionist fighting in Georgia",14, "GEO", "https://en.wikipedia.org/wiki/Georgian_Civil_War"], 
          ["Iraqi suppression of rebel movement",15, "IRQ", "https://en.wikipedia.org/wiki/1991_uprisings_in_Iraq"], 
          ["Rwandan genocide",16, "RWA", "https://en.wikipedia.org/wiki/Rwandan_genocide"], 
          ["Breakup of Yugoslavia",17, "BIH", "https://en.wikipedia.org/wiki/Breakup_of_Yugoslavia"],          
          ["Civil conflict in Colombia", 18, "COL", "https://en.wikipedia.org/wiki/Colombian_conflict"],
          ["US Invasion of Iraq", 19, "IRQ", "https://en.wikipedia.org/wiki/2003_invasion_of_Iraq"],
          ["", 20],
          ["War in Syria", 21, "SYR", "https://en.wikipedia.org/wiki/Syrian_Civil_War"],
          ["Civil conflict in Columbia", 22, "COL", "https://en.wikipedia.org/wiki/Colombian_conflict"],
          ["South Sudanese Civil War", 23, "SSD", "https://en.wikipedia.org/wiki/South_Sudanese_Civil_War"]]
          )
          
   .enter()
   .append("svg:a")
   .attr("xlink:href", function(d){return d[3];})
   .attr("target", "_newtab")
   .append("text")
   .attr("x", xstart + xoffset + 30).attr("y",800)
   .text(function(d) { return d[0];} )
   .style("fill", function(d) {
	   idx = findIndex(d[2]);
	   if (idx >= 0)
		   colorStr = countryarr[idx][1];
	   else
		   colorStr = "200,200,200" // gray
	   return "rgb(" + colorStr + ")"; 
	   }) //("fill","rgb(200,200,200)").
   .style("font-size",font2);

var labelindex = 0;
var labelindexold = 9999;

svg.append("text").attr("x", xstart + xoffset).attr("y", ystart + yoffset2*2 + yoffset + rankoffset).text("1.").style("fill","rgb(200,200,200)").style("font-size",font2);
svg.append("text").attr("x", xstart + xoffset).attr("y", ystart + yoffset2*2 + yoffset + rankoffset*2).text("2.").style("fill","rgb(200,200,200)").style("font-size",font2);
svg.append("text").attr("x", xstart + xoffset).attr("y", ystart + yoffset2*2 + yoffset + rankoffset*3).text("3.").style("fill","rgb(200,200,200)").style("font-size",font2);



d3.json("worldc11.json", function(error, world) {
  if (error) throw error;

var colors = {1: "blue", 2: "red", 3: "orange", 4: "green", 5: "purple", 6: "yellow", 7: "pink", 8: "white", 9: "brown", 10: "steelblue", 11: "chartreuse", 12: "DeepSkyBlue", 13: "Magenta"};

function roundarray(my_array) {
var x = 0;
var len = my_array.length
while(x < len){ 
    my_array[x][0] = Math.round(my_array[x][0]);
    my_array[x][1] = Math.round(my_array[x][1]); 
    x++
}
return my_array
}



  var g = svg.append("g");
  var worldmap =
    g.selectAll("path")
      .data(topojson.feature(world, world.objects.worldc11).features)
    .enter().append("path")
      .attr("class","world")
      .attr("d", path)
      .style("stroke","rgb(255,255,255)")
      .style("stroke-width",0.5)
      //.style("fill", "blue")
	  .style("fill", function(d) {return findColor(d.properties.adm0_a3);})
	  //function(d) {
		  //console.log(d.properties.adm0_a3, console.log(findColor(d.properties.adm0_a3));
		  //findColor(d.properties.adm0_a3)
           // if (d.properties.adm0_a3 == "USA") {return "black";}
           // if (d.properties.adm0_a3 == "RUS") {return "rgb(138,43,226)";}
           // return colors[d.properties.mapcolor13];
		   /*
            if (d.properties.adm0_a3 == "AFG") {return "blue";}
			if (d.properties.adm0_a3 == "ARM") {return "blue";}
			if (d.properties.adm0_a3 == "AZE") {return "blue";}
			if (d.properties.adm0_a3 == "CHN") {return "blue";}
			if (d.properties.adm0_a3 == "CZE") {return "blue";}
			if (d.properties.adm0_a3 == "DZA") {return "blue";}
			if (d.properties.adm0_a3 == "ERI") {return "blue";}
			if (d.properties.adm0_a3 == "ETH") {return "blue";}
			if (d.properties.adm0_a3 == "GEO") {return "blue";}
			if (d.properties.adm0_a3 == "GTM") {return "blue";}
			if (d.properties.adm0_a3 == "HRV") {return "blue";}
			if (d.properties.adm0_a3 == "HUN") {return "blue";}
			if (d.properties.adm0_a3 == "IRQ") {return "blue";}
			if (d.properties.adm0_a3 == "ISR") {return "blue";}
			if (d.properties.adm0_a3 == "IND") {return "blue";}
			if (d.properties.adm0_a3 == "IDN") {return "blue";}
			if (d.properties.adm0_a3 == "KHM") {return "blue";}
			if (d.properties.adm0_a3 == "LAO") {return "blue";}
			if (d.properties.adm0_a3 == "MMR") {return "blue";}
			if (d.properties.adm0_a3 == "MOZ") {return "blue";}
			if (d.properties.adm0_a3 == "NIC") {return "blue";}
			if (d.properties.adm0_a3 == "NGA") {return "blue";}
			if (d.properties.adm0_a3 == "PAK") {return "blue";}
			if (d.properties.adm0_a3 == "PSE") {return "blue";}
			if (d.properties.adm0_a3 == "POL") {return "blue";}
			if (d.properties.adm0_a3 == "IND") {return "blue";}
			if (d.properties.adm0_a3 == "RUS") {return "blue";}
			if (d.properties.adm0_a3 == "RWA") {return "blue";}
			if (d.properties.adm0_a3 == "SLV") {return "blue";}
			if (d.properties.adm0_a3 == "SRB") {return "blue";}
			if (d.properties.adm0_a3 == "TJK") {return "blue";}
			if (d.properties.adm0_a3 == "UGA") {return "blue";}
			if (d.properties.adm0_a3 == "VNM") {return "blue";}
			if (d.properties.adm0_a3 == "ZWE") {return "blue";}		  
            return "black";
			*/
	  //})
       .attr("class",function(d){
         
           if (d.properties.adm0_a3 == "USA") {return "usa";}
           else { return "other"; }
       })
       .style("stroke-opacity", 0.7)
       .style("fill-opacity", 0)
       .attr("class",function(d){ if (d.properties.num > 36) {return "group1";} else { return "group2";} });

  g.append("path")
      .datum(topojson.mesh(world, world.objects.worldc11, function(a, b) { return a == b; }))
      .attr("d", path)
      .style("stroke","white")
      .style("stroke-opacity",0.6)
      .style("stroke-width",0.5)
      .style("fill","transparent")
       .style("pointer-events","none");

  d3.select("#yearslider").on("input", function() {
        yr = this.value;
     yearlabel.text(yr).attr("x", 582 + 3.74*(yr-year_start));
     ///labelindex controls the movement of the Total migration
     labelindex = Math.floor(yr/10)-194;
     if (yr > 2009) { 
    	 labelindex = descript.len - 2;
    	 console.log(labelindex)
     }

     dotstotal = ctytotal[labelindex]/10;
//     console.log(dotstotal)
     if (yr > 2009) { dotstotal = ctytotal[labelindex];}

     // It's now have the size of 33, matching with size for countryarr
     countrydist = new Array(countryarr.length).fill(0);
     countrydist = sumarrays(countrydist,ctydist[labelindex], yr);

     speedadjust = 0;

     decadelabel.text(descript[labelindex][descript[labelindex].length -1]);
     migrationlabel.text(descript[labelindex][descript[labelindex].length -2]);
     ranklabels.transition().attr("y",function(d){
         return ystart + yoffset2*2 + yoffset + descript[labelindex][d[1]]*rankoffset;
     });

     labelindexold = labelindex;

     var annualtotal = ctytotal[Math.floor(yr/10)-194]/10;
     if (yr > 2009) { annualtotal = ctytotal[yr-1991]; }

if (yr%2 == 0){
     d3.selectAll(".group1").style("fill-opacity",function(d){
         var numdecade;
         if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
         else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
     });
} else {
     d3.selectAll(".group2").style("fill-opacity",function(d){
         var numdecade;
         if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
         else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
     });
}
  });


  d3.select("#yearslider").on("change", function() {
        yr = this.value;
     yearlabel.text(yr).attr("x", 582 + 6*(yr-year_start));
     labelindex = Math.floor(yr/10)-194;
     if (yr > 2009) { 
    	 labelindex = descript.len - 2;
    	 console.log(labelindex)
     }
     dotstotal = ctytotal[labelindex]/10;
     
     if (yr > 2009) { dotstotal = ctytotal[labelindex];}

     countrydist = new Array(countryarr.length).fill(0);
     countrydist = sumarrays(countrydist,ctydist[labelindex], yr);

     speedadjust = 0;

     decadelabel.text(descript[labelindex][15]);
     migrationlabel.text(d3.format("n")(descript[labelindex][14]));
     ranklabels.transition().attr("y",function(d){
         return ystart + yoffset2*2 + yoffset + descript[labelindex][d[1]]*rankoffset;
     });

     labelindexold = labelindex;

     var annualtotal = ctytotal[Math.floor(yr/10)-194]/10;
     if (yr > 2009) { annualtotal = ctytotal[yr-1991]; }

if (yr%2 == 0){
     d3.selectAll(".group1").style("fill-opacity",function(d){
         var numdecade;
         if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
         else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
     });
} else {
     d3.selectAll(".group2").style("fill-opacity",function(d){
         var numdecade;
         //if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
         //else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
		 if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
         else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
     });
}


  });


  d3.select("#playbutton").on("click", function() {

	if (this.value == "play"){
		d3.select("#playbutton").property("value","stop").property("src","stop.png");
                starttimer();
	} else{    
		d3.select("#playbutton").property("value","play").property("src","play.png");
		stoptimer();

	 countrydist = new Array(countryarr.length).fill(0);

	 dotstotal = 0;
     speedadjust = 0;
	} 
	  
  });
  d3.select("#playbutton").on("mouseover", function() {    
		d3.select("#playbutton").transition().style("opacity",1);
  }).on("mouseout", function() {    
		d3.select("#playbutton").transition().style("opacity",0.6);
  });

      var context = document.getElementById('canvas').getContext("2d");




globalCompositeOperation = 'source-over'; //'source-over';lighter
context.globalAlpha = 1;

      canvas.className = "canvastop";

      // Set up object to contain particles and set some default values
      var particles = {},
          particleIndex = 0,
          settings = {
            density: 20,
            particleSize: 2
          };

      // Set up a function to create multiple particles
    function Particle(n) {



        // Add new particle to the index
        // Object used as it's simpler to manage than an array
        particleIndex ++;
        particles[particleIndex] = this;
        this.id = particleIndex;
        this.life = 0;
        this.maxLife = 100;

        this.sizeadj = 1000 + Math.random()*4;

		//console.log(n)

		// Gets country name
		this.cty = countryarr[n];
		// Gets path for country
		this.arcpath = pathobject[this.cty[0]]; //.map(projection);


		// Gets x and y coordinates
        this.x = this.arcpath[0][0];
        this.y = this.arcpath[0][1];

     }


    Particle.prototype.draw = function() {

    	//this.life is initialized at 0 in Particle() function
    	//maxLife is initialized at 100
		this.x = this.arcpath[this.life][0];
		this.y = this.arcpath[this.life][1];

        // Age the particle
        this.life++;
        if (this.life >= (this.maxLife - 12)) {
               usasize = usasize + 3/4;
        }

        if (this.life >= this.maxLife) {
          delete particles[this.id];
        }


        context.beginPath();

        // cty[1] is second element of countryarr, i.e. (255, 0, 255)
        context.fillStyle = "rgb(" + this.cty[1] + ")";
        context.arc(this.x, this.y, settings.particleSize, 0, Math.PI*2, true); 
        context.closePath();
        context.fill();


      }

var lastCalledTime = 0;
var totaltime = 0;
var totaldots = 0;

var d3timer = d3.timer(function(){ timerfunction(); }, 40);

function starttimer(){
d3timer.restart();
}
function stoptimer(){
d3timer.stop();
}


//starttimer();

//Ex: search VNM2 in the list of countrySet with VNM in it 
function countrySetHasSubstring(countrySet, country) {
	for (let c of countrySet)  {
		if (c.substring(0,3) == country) 
			return c;
	}
	return null;
}

function timerfunction() {
        
        context.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the particles
        for (var i = 0; i < settings.density; i++) {

         
          var bound = 1-speedmult*(0.2*ctytotal[Math.floor(yr/10)-194]/1000 + speedadjust);
          if (Math.random() > bound && dotstotal > 0) {
            var n = selectfromdist(); //Math.random()*dotstotal);
            
            // Introducing a random chance of creating a particle
            // corresponding to an chance of 1 per second,
            // per "density" value
          if (n > 0) {
            totaldots++;
            new Particle(n);
          }

          }

        }

        var usascale = (usasize + usasizeold4) / 2;
        context.arc(usacoords[0][0], usacoords[0][1], 60, 0, Math.PI*2, true);

        context.closePath();
    //Remove the highlight of USA
    var gradient = gradient = context.createRadialGradient(usacoords[0][0], usacoords[0][1], 0, usacoords[0][0], usacoords[0][1], 0*opacityscale(usascale));
    gradient.addColorStop(0, 'rgba('+ '255,255,255' + ',' + opacityscale(usascale)*0.5 +')');
    gradient.addColorStop(0.4, 'rgba('+ '255,255,255' + ',' + opacityscale(usascale)*0.3 +')');
    gradient.addColorStop(0.8, 'rgba('+ '255,255,255' + ',' + opacityscale(usascale)*0.1 +')');
    gradient.addColorStop(1.0, 'rgba('+ '255,255,255' + ',0)');
    //disabled the 'splash' effect in USA
	//context.fillStyle = gradient;
    //context.fill();



        for (var i in particles) {
          particles[i].draw();
          
        }




  if(!lastCalledTime) {
     lastCalledTime = Date.now();
     fps = 0;
     return;
  }


  var delta = (Date.now() - lastCalledTime)/1000;
  lastCalledTime = Date.now();
  var fps = 1/delta;
  //console.log(fps);



if (d3.select("#playbutton").property("value") == "stop"){

//********* NEW YEAR *****************
  if (Math.floor(totaltime) !== Math.floor(totaltime + delta*speedmult)){

     speedadjust = 0.2*dotstotal/100;  
     yr++;
     if (yr == 2025) { yr = year_start;}
    

//console.log("time: " + totaltime + " / dotstotal: " + dotstotal + " / speedadj: " + speedadjust + " / countryarray: " + JSON.stringify(countrydist) + " / " + JSON.stringify(testarr));


     if (yr < year_end) {
     yearlabel.text(yr).attr("x", 130 + 3.8*(yr-1820));
     d3.select("#yearslider")
	.property("value", yr);
        
     labelindex = Math.floor(yr/10)-194;
/*     if (yr > 2009) { 
    	 labelindex = descript.length - 2;
     }
*/     
//     console.log(labelindex)

     if(labelindex !== labelindexold) {
     decadelabel.transition().text(descript[labelindex][descript[labelindex].length -1]);
     migrationlabel.transition().text(d3.format("n")(descript[labelindex][descript[labelindex].length-2]));
     ranklabels.transition().duration(1000).attr("y",function(d){
         return ystart + yoffset2*2 + yoffset + descript[labelindex][d[1]]*rankoffset;
     });

     }
     labelindexold = labelindex;
     ///math.floor(yr/10)-182 = 0
     countrydist = sumarrays(countrydist, ctydist[Math.floor(yr/10)-194],yr);
     if (yr < 2010) {dotstotal = dotstotal + ctytotal[Math.floor(yr/10)-194]/10;}
     else {dotstotal = dotstotal + ctytotal[yr-1991];}

if (yr%2 == 0){
     d3.selectAll(".group1").transition().duration(1000).style("fill-opacity",function(d){
// Thong's new code to calculate opacity
         var decadeidx = Math.floor(yr/10)-194;
         countrySet = getCountriesForDecade(decadeidx);
         // find the countries relevant to this decade and set opacity scale
         opacscale = 0;
         if (countrySet.has(d.properties.adm0_a3)) {
             countryScale = ctydist[decadeidx][findIndex(d.properties.adm0_a3)]
             opacscale = opacityscale(countryScale);
         }
         else {
        	 country = countrySetHasSubstring(countrySet, d.properties.adm0_a3) 
        	 if (country != null) {
                 countryScale = ctydist[decadeidx][findIndex(country)]
                 opacscale = opacityscale(countryScale);        		 
        	 }        	 
         }
         return opacscale * 0.75;
     });
} else {
     d3.selectAll(".group2").transition().duration(1000).style("fill-opacity",function(d){
         var decadeidx = Math.floor(yr/10)-194;
         countrySet = getCountriesForDecade(decadeidx);
         // find the countries relevant to this decade and set opacity scale
         opacscale = 0;
         if (countrySet.has(d.properties.adm0_a3)) {
             countryScale = ctydist[decadeidx][findIndex(d.properties.adm0_a3)]
             opacscale = opacityscale(countryScale);
         }
         else {
        	 country = countrySetHasSubstring(countrySet, d.properties.adm0_a3) 
        	 if (country != null) {
                 countryScale = ctydist[decadeidx][findIndex(country)]
                 opacscale = opacityscale(countryScale);        		 
        	 }        	 
         }
         return opacscale * 0.75;
/*
    	 var numdecade;
//       if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
//       else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         //numdecade = ctydist[Math.floor(yr/10)-194][findIndex(d.properties.num)];
		 numdecade = ctydist[Math.floor(yr/10)-194][findIndex(d.properties.adm0_a3)]*5;
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
     });
} else {
     d3.selectAll(".group2").transition().duration(1000).style("fill-opacity",function(d){
         var numdecade;
//       if (yr > 2009) { numdecade = ctydist[yr-1991][d.properties.num]*10; }
//       else {numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num]; }
         numdecade = ctydist[Math.floor(yr/10)-194][findIndex(d.properties.adm0_a3)]*5;
		 //numdecade = ctydist[Math.floor(yr/10)-194][d.properties.num];
         if (d.properties.num > 67) { numdecade = numdecade / 7; }
         return opacityscale(numdecade);
*/
     });
}


  } else if (yr == 2015) {
     worldmap.transition().duration(2000/speedmult).style("fill-opacity",0);

  } else {
	 countrydist = new Array(countryarr.length).fill(0);
	 dotstotal = 0;
  }
  } //if not new year


} else {
	 countrydist = new Array(countryarr.length).fill(0);
     dotstotal = 0;
     speedadjust = 0;

}
  

  totaltime = totaltime + delta*speedmult;

  usasizeold4 = usasizeold3;
  usasizeold3 = usasizeold2;  
  usasizeold2 = usasizeold;
  usasizeold = usasize;
  usasize = 0;

}
//end of timer function


function selectfromdist(n) {
//	  console.log("selectfromdist: countrydist.length = ", countrydist.length)
      var tottemp = 0;
      var floorsum = 0;

      for (var j = 0; j < countrydist.length; j++){
         floorsum = floorsum + Math.max(countrydist[j],0);
      }

      var nn = Math.random()*floorsum;

      for (var j = 0; j < countrydist.length; j++){
      tottemp = tottemp + Math.max(countrydist[j],0);
      if (nn <= tottemp) {
         dotstotal = dotstotal - 1;
         countrydist[j]--;
         testarr[j]++;
         return j;


      }

      }
      return -99;
}






});


//if y is less than 2009, denominator is set to 1, otherwise it's 10
//Then return an array of lenth 72 where each is the sum of the first array passed plus the second divded by denominator variable
//ar2 being passed in is ctydist


function sumarrays(ar1, ar2, y) {
      var denom = 10;
      if (y > 2009) { denom = 1; }
      var ar3 = [];
      for (var j = 0; j < ar1.length; j++){
         ar3[j] = ar1[j] + ar2[j]/denom;
      }
      return ar3;
}
